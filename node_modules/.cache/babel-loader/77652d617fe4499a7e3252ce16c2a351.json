{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"name\", \"min\", \"max\", \"dayPlaceholder\", \"monthPlaceholder\", \"yearPlaceholder\", \"popupDirection\", \"defaultValue\", \"hasMouse\", \"monthNames\", \"day\", \"month\", \"year\", \"onDateChange\", \"disabled\"],\n    _excluded2 = [\"min\", \"max\", \"dayPlaceholder\", \"monthPlaceholder\", \"yearPlaceholder\", \"popupDirection\", \"defaultValue\", \"hasMouse\", \"day\", \"month\", \"year\", \"onDateChange\"],\n    _excluded3 = [\"hasMouse\", \"defaultValue\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport Input from \"../Input/Input\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport { leadingZero } from \"../../lib/utils\";\nimport CustomSelect from \"../CustomSelect/CustomSelect\";\nvar DefaultMonths = [\"Января\", \"Февраля\", \"Марта\", \"Апреля\", \"Мая\", \"Июня\", \"Июля\", \"Августа\", \"Сентября\", \"Октября\", \"Ноября\", \"Декабря\"]; // Переводим state к формату гг-мм-дд\n\nfunction convertToInputFormat(_ref) {\n  var _ref$day = _ref.day,\n      day = _ref$day === void 0 ? 0 : _ref$day,\n      _ref$month = _ref.month,\n      month = _ref$month === void 0 ? 0 : _ref$month,\n      _ref$year = _ref.year,\n      year = _ref$year === void 0 ? 0 : _ref$year;\n  return \"\".concat(year, \"-\").concat(leadingZero(month), \"-\").concat(leadingZero(day));\n} // Переводим дату формата гг-мм-дд к объекту\n\n\nfunction parseInputDate(date) {\n  var splited = date.split(\"-\");\n  return {\n    day: Number(splited[2]),\n    month: Number(splited[1]),\n    year: Number(splited[0])\n  };\n}\n\nfunction getMonthMaxDay(month, year) {\n  return month ? new Date(year || 2016, month, 0).getDate() : 31;\n}\n\nvar range = function range(start, end) {\n  var swap = start > end;\n  var arr = [];\n\n  for (var i = Math.min(start, end); i <= Math.max(start, end); i++) {\n    arr.push(i);\n  }\n\n  return swap ? arr.reverse() : arr;\n};\n\nvar DatePickerCustom = function DatePickerCustom(_ref2) {\n  var name = _ref2.name,\n      _ref2$min = _ref2.min,\n      min = _ref2$min === void 0 ? {\n    day: 0,\n    month: 0,\n    year: 0\n  } : _ref2$min,\n      _ref2$max = _ref2.max,\n      max = _ref2$max === void 0 ? {\n    day: 31,\n    month: 12,\n    year: 2100\n  } : _ref2$max,\n      dayPlaceholder = _ref2.dayPlaceholder,\n      monthPlaceholder = _ref2.monthPlaceholder,\n      yearPlaceholder = _ref2.yearPlaceholder,\n      popupDirection = _ref2.popupDirection,\n      defaultValue = _ref2.defaultValue,\n      hasMouse = _ref2.hasMouse,\n      monthNames = _ref2.monthNames,\n      _ref2$day = _ref2.day,\n      day = _ref2$day === void 0 ? 0 : _ref2$day,\n      _ref2$month = _ref2.month,\n      month = _ref2$month === void 0 ? 0 : _ref2$month,\n      _ref2$year = _ref2.year,\n      year = _ref2$year === void 0 ? 0 : _ref2$year,\n      onDateChange = _ref2.onDateChange,\n      disabled = _ref2.disabled,\n      restProps = _objectWithoutProperties(_ref2, _excluded);\n\n  var onSelectChange = function onSelectChange(e) {\n    onDateChange === null || onDateChange === void 0 ? void 0 : onDateChange(_defineProperty({\n      day: day,\n      month: month,\n      year: year\n    }, e.target.name, Number(e.target.value)));\n  };\n\n  var dayOptions = range(1, getMonthMaxDay(month, year)).map(function (value) {\n    return {\n      label: String(value),\n      value: value\n    };\n  });\n  var monthOptions = (monthNames || DefaultMonths).map(function (name, index) {\n    return {\n      label: name,\n      value: index + 1\n    };\n  });\n  var yearOptions = range(max.year, min.year).map(function (value) {\n    return {\n      label: String(value),\n      value: value\n    };\n  });\n  return createScopedElement(\"div\", _extends({\n    vkuiClass: \"DatePicker\"\n  }, restProps), createScopedElement(\"div\", {\n    vkuiClass: \"DatePicker__container\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"DatePicker__day\"\n  }, createScopedElement(CustomSelect, {\n    name: \"day\",\n    value: day,\n    options: dayOptions,\n    placeholder: dayPlaceholder,\n    popupDirection: popupDirection,\n    onChange: onSelectChange,\n    disabled: disabled\n  })), createScopedElement(\"div\", {\n    vkuiClass: \"DatePicker__month\"\n  }, createScopedElement(CustomSelect, {\n    vkuiClass: \"DatePicker__monthSelect\",\n    name: \"month\",\n    value: month,\n    options: monthOptions,\n    placeholder: monthPlaceholder,\n    popupDirection: popupDirection,\n    onChange: onSelectChange,\n    disabled: disabled\n  })), createScopedElement(\"div\", {\n    vkuiClass: \"DatePicker__year\"\n  }, createScopedElement(CustomSelect, {\n    name: \"year\",\n    value: year,\n    options: yearOptions,\n    placeholder: yearPlaceholder,\n    popupDirection: popupDirection,\n    onChange: onSelectChange,\n    disabled: disabled\n  }))), createScopedElement(\"input\", {\n    type: \"hidden\",\n    name: name,\n    value: convertToInputFormat({\n      day: day,\n      month: month,\n      year: year\n    })\n  }));\n};\n\nvar DatePickerNative = function DatePickerNative(_ref3) {\n  var _ref3$min = _ref3.min,\n      min = _ref3$min === void 0 ? {\n    day: 0,\n    month: 0,\n    year: 0\n  } : _ref3$min,\n      _ref3$max = _ref3.max,\n      max = _ref3$max === void 0 ? {\n    day: 31,\n    month: 12,\n    year: 2100\n  } : _ref3$max,\n      dayPlaceholder = _ref3.dayPlaceholder,\n      monthPlaceholder = _ref3.monthPlaceholder,\n      yearPlaceholder = _ref3.yearPlaceholder,\n      popupDirection = _ref3.popupDirection,\n      defaultValue = _ref3.defaultValue,\n      hasMouse = _ref3.hasMouse,\n      day = _ref3.day,\n      month = _ref3.month,\n      year = _ref3.year,\n      onDateChange = _ref3.onDateChange,\n      restProps = _objectWithoutProperties(_ref3, _excluded2);\n\n  var defProps = day && month && year ? {\n    defaultValue: convertToInputFormat({\n      day: day,\n      month: month,\n      year: year\n    })\n  } : {};\n  var onStringChange = React.useCallback(function (e) {\n    onDateChange === null || onDateChange === void 0 ? void 0 : onDateChange(parseInputDate(e.currentTarget.value));\n  }, [onDateChange]);\n  return createScopedElement(Input, _extends({}, restProps, {\n    type: \"date\",\n    onChange: onStringChange,\n    min: convertToInputFormat(min),\n    max: convertToInputFormat(max)\n  }, defProps));\n};\n\nvar DatePicker = function DatePicker(_ref4) {\n  var hasMouse = _ref4.hasMouse,\n      defaultValue = _ref4.defaultValue,\n      props = _objectWithoutProperties(_ref4, _excluded3);\n\n  var _React$useState = React.useState(function () {\n    return {\n      day: (defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.day) || 0,\n      month: (defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.month) || 0,\n      year: (defaultValue === null || defaultValue === void 0 ? void 0 : defaultValue.year) || 0\n    };\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var onDateChange = React.useCallback(function (update) {\n    setValue(update);\n    props.onDateChange && props.onDateChange(_objectSpread({}, update));\n  }, [props]);\n  var Cmp = hasMouse ? DatePickerCustom : DatePickerNative;\n  return createScopedElement(Cmp, _extends({}, props, value, {\n    onDateChange: onDateChange\n  }));\n}; // eslint-disable-next-line import/no-default-export\n\n\nexport default withAdaptivity(DatePicker, {\n  hasMouse: true\n});","map":{"version":3,"mappings":"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","names":["React","Input","withAdaptivity","leadingZero","CustomSelect","DefaultMonths","convertToInputFormat","day","month","year","parseInputDate","date","splited","split","Number","getMonthMaxDay","Date","getDate","range","start","end","swap","arr","i","Math","min","max","push","reverse","DatePickerCustom","name","dayPlaceholder","monthPlaceholder","yearPlaceholder","popupDirection","defaultValue","hasMouse","monthNames","onDateChange","disabled","restProps","onSelectChange","e","target","value","dayOptions","map","label","String","monthOptions","index","yearOptions","createScopedElement","vkuiClass","options","placeholder","onChange","type","DatePickerNative","defProps","onStringChange","useCallback","currentTarget","DatePicker","props","useState","setValue","update","Cmp"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/DatePicker/DatePicker.tsx"],"sourcesContent":["import * as React from \"react\";\nimport Input from \"../Input/Input\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport { HasPlatform } from \"../../types\";\nimport { leadingZero } from \"../../lib/utils\";\nimport CustomSelect from \"../CustomSelect/CustomSelect\";\nimport \"./DatePicker.css\";\n\nconst DefaultMonths: string[] = [\n  \"Января\",\n  \"Февраля\",\n  \"Марта\",\n  \"Апреля\",\n  \"Мая\",\n  \"Июня\",\n  \"Июля\",\n  \"Августа\",\n  \"Сентября\",\n  \"Октября\",\n  \"Ноября\",\n  \"Декабря\",\n];\n\nexport type DatePickerDateFormat = {\n  day: number;\n  month: number;\n  year: number;\n};\n\nexport interface DatePickerProps\n  extends Omit<\n      React.HTMLAttributes<HTMLDivElement>,\n      \"defaultValue\" | \"min\" | \"max\"\n    >,\n    HasPlatform,\n    AdaptivityProps {\n  min?: DatePickerDateFormat;\n  max?: DatePickerDateFormat;\n  name?: string;\n  defaultValue?: DatePickerDateFormat;\n  popupDirection?: \"top\" | \"bottom\";\n  monthNames?: string[];\n  dayPlaceholder?: string;\n  monthPlaceholder?: string;\n  yearPlaceholder?: string;\n  onDateChange?: (value: DatePickerDateFormat) => void;\n  disabled?: boolean;\n}\n\n// Переводим state к формату гг-мм-дд\nfunction convertToInputFormat({\n  day = 0,\n  month = 0,\n  year = 0,\n}: Partial<DatePickerDateFormat>) {\n  return `${year}-${leadingZero(month)}-${leadingZero(day)}`;\n}\n\n// Переводим дату формата гг-мм-дд к объекту\nfunction parseInputDate(date: string): DatePickerDateFormat {\n  const splited = date.split(\"-\");\n\n  return {\n    day: Number(splited[2]),\n    month: Number(splited[1]),\n    year: Number(splited[0]),\n  };\n}\n\nfunction getMonthMaxDay(month?: number, year?: number) {\n  return month ? new Date(year || 2016, month, 0).getDate() : 31;\n}\n\nconst range = (start: number, end: number) => {\n  const swap = start > end;\n  const arr = [];\n  for (let i = Math.min(start, end); i <= Math.max(start, end); i++) {\n    arr.push(i);\n  }\n  return swap ? arr.reverse() : arr;\n};\n\nconst DatePickerCustom: React.FC<\n  DatePickerProps & Partial<DatePickerDateFormat>\n> = ({\n  name,\n  min = { day: 0, month: 0, year: 0 },\n  max = { day: 31, month: 12, year: 2100 },\n  dayPlaceholder,\n  monthPlaceholder,\n  yearPlaceholder,\n  popupDirection,\n  defaultValue,\n  hasMouse,\n  monthNames,\n  day = 0,\n  month = 0,\n  year = 0,\n  onDateChange,\n  disabled,\n  ...restProps\n}) => {\n  const onSelectChange: React.ChangeEventHandler<HTMLSelectElement> = (e) => {\n    onDateChange?.({\n      day,\n      month,\n      year,\n      [e.target.name]: Number(e.target.value),\n    });\n  };\n  const dayOptions = range(1, getMonthMaxDay(month, year)).map((value) => ({\n    label: String(value),\n    value,\n  }));\n  const monthOptions = (monthNames || DefaultMonths).map((name, index) => ({\n    label: name,\n    value: index + 1,\n  }));\n  const yearOptions = range(max.year, min.year).map((value) => ({\n    label: String(value),\n    value: value,\n  }));\n  return (\n    <div vkuiClass=\"DatePicker\" {...restProps}>\n      <div vkuiClass=\"DatePicker__container\">\n        <div vkuiClass=\"DatePicker__day\">\n          <CustomSelect\n            name=\"day\"\n            value={day}\n            options={dayOptions}\n            placeholder={dayPlaceholder}\n            popupDirection={popupDirection}\n            onChange={onSelectChange}\n            disabled={disabled}\n          />\n        </div>\n        <div vkuiClass=\"DatePicker__month\">\n          <CustomSelect\n            vkuiClass=\"DatePicker__monthSelect\"\n            name=\"month\"\n            value={month}\n            options={monthOptions}\n            placeholder={monthPlaceholder}\n            popupDirection={popupDirection}\n            onChange={onSelectChange}\n            disabled={disabled}\n          />\n        </div>\n        <div vkuiClass=\"DatePicker__year\">\n          <CustomSelect\n            name=\"year\"\n            value={year}\n            options={yearOptions}\n            placeholder={yearPlaceholder}\n            popupDirection={popupDirection}\n            onChange={onSelectChange}\n            disabled={disabled}\n          />\n        </div>\n      </div>\n      <input\n        type=\"hidden\"\n        name={name}\n        value={convertToInputFormat({ day, month, year })}\n      />\n    </div>\n  );\n};\n\nconst DatePickerNative: React.FC<\n  DatePickerProps & Partial<DatePickerDateFormat>\n> = ({\n  min = { day: 0, month: 0, year: 0 },\n  max = { day: 31, month: 12, year: 2100 },\n  dayPlaceholder,\n  monthPlaceholder,\n  yearPlaceholder,\n  popupDirection,\n  defaultValue,\n  hasMouse,\n  day,\n  month,\n  year,\n  onDateChange,\n  ...restProps\n}) => {\n  const defProps =\n    day && month && year\n      ? { defaultValue: convertToInputFormat({ day, month, year }) }\n      : {};\n  const onStringChange: React.ChangeEventHandler<HTMLInputElement> =\n    React.useCallback(\n      (e) => {\n        onDateChange?.(parseInputDate(e.currentTarget.value));\n      },\n      [onDateChange]\n    );\n  return (\n    <Input\n      {...restProps}\n      type=\"date\"\n      onChange={onStringChange}\n      min={convertToInputFormat(min)}\n      max={convertToInputFormat(max)}\n      {...defProps}\n    />\n  );\n};\n\nconst DatePicker: React.FC<DatePickerProps> = ({\n  hasMouse,\n  defaultValue,\n  ...props\n}) => {\n  const [value, setValue] = React.useState<Partial<DatePickerDateFormat>>(\n    () => ({\n      day: defaultValue?.day || 0,\n      month: defaultValue?.month || 0,\n      year: defaultValue?.year || 0,\n    })\n  );\n\n  const onDateChange = React.useCallback(\n    (update: DatePickerDateFormat) => {\n      setValue(update);\n      props.onDateChange && props.onDateChange({ ...update });\n    },\n    [props]\n  );\n\n  const Cmp = hasMouse ? DatePickerCustom : DatePickerNative;\n  return <Cmp {...props} {...value} onDateChange={onDateChange} />;\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(DatePicker, {\n  hasMouse: true,\n});\n"]},"metadata":{},"sourceType":"module"}