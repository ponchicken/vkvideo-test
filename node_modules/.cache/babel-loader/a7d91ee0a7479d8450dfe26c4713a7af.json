{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"layout\", \"action\", \"before\", \"after\", \"viewWidth\", \"duration\", \"onActionClick\", \"onClose\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { Touch } from \"../Touch/Touch\";\nimport { classNames } from \"../../lib/classNames\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { ANDROID, VKCOM } from \"../../lib/platform\";\nimport { rubber } from \"../../lib/touch\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport Text from \"../Typography/Text/Text\";\nimport Button from \"../Button/Button\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\n\nvar SnackbarComponent = function SnackbarComponent(props) {\n  var children = props.children,\n      layout = props.layout,\n      action = props.action,\n      before = props.before,\n      after = props.after,\n      viewWidth = props.viewWidth,\n      _props$duration = props.duration,\n      duration = _props$duration === void 0 ? 0 : _props$duration,\n      onActionClick = props.onActionClick,\n      onClose = props.onClose,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var platform = usePlatform();\n\n  var _useWaitTransitionFin = useWaitTransitionFinish(),\n      waitTransitionFinish = _useWaitTransitionFin.waitTransitionFinish;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      closing = _React$useState2[0],\n      setClosing = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      touched = _React$useState4[0],\n      setTouched = _React$useState4[1];\n\n  var shiftXPercentRef = React.useRef(0);\n  var shiftXCurrentRef = React.useRef(0);\n  var bodyElRef = React.useRef(null);\n  var innerElRef = React.useRef(null);\n  var animationFrameRef = React.useRef(null);\n  var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  var transitionFinishDurationFallback = platform === ANDROID || platform === VKCOM ? 400 : 320;\n\n  var close = function close() {\n    setClosing(true);\n    waitTransitionFinish(innerElRef.current, function () {\n      onClose();\n    }, transitionFinishDurationFallback);\n  };\n\n  var handleActionClick = function handleActionClick(e) {\n    close();\n\n    if (action && typeof onActionClick === \"function\") {\n      onActionClick(e);\n    }\n  };\n\n  var closeTimeout = useTimeout(close, duration);\n\n  var setBodyTransform = function setBodyTransform(percent) {\n    if (animationFrameRef.current !== null) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n\n    animationFrameRef.current = requestAnimationFrame(function () {\n      if (bodyElRef.current) {\n        bodyElRef.current.style.transform = \"translate3d(\".concat(percent, \"%, 0, 0)\");\n      }\n    });\n  };\n\n  var onTouchStart = closeTimeout.clear;\n\n  var onTouchMoveX = function onTouchMoveX(event) {\n    var _bodyElRef$current$of, _bodyElRef$current;\n\n    var shiftX = event.shiftX,\n        originalEvent = event.originalEvent;\n    originalEvent.preventDefault();\n\n    if (!touched) {\n      setTouched(true);\n    }\n\n    shiftXPercentRef.current = shiftX / ((_bodyElRef$current$of = (_bodyElRef$current = bodyElRef.current) === null || _bodyElRef$current === void 0 ? void 0 : _bodyElRef$current.offsetWidth) !== null && _bodyElRef$current$of !== void 0 ? _bodyElRef$current$of : 0) * 100;\n    shiftXCurrentRef.current = rubber(shiftXPercentRef.current, 72, 1.2, platform === ANDROID || platform === VKCOM);\n    setBodyTransform(shiftXCurrentRef.current);\n  };\n\n  var onTouchEnd = function onTouchEnd(e) {\n    var callback;\n\n    if (touched) {\n      var shiftXCurrent = shiftXCurrentRef.current;\n      var expectTranslateY = shiftXCurrent / e.duration * 240 * 0.6;\n      shiftXCurrent = shiftXCurrent + expectTranslateY;\n\n      if (isDesktop && shiftXCurrent <= -50) {\n        closeTimeout.clear();\n        waitTransitionFinish(bodyElRef.current, function () {\n          onClose();\n        }, transitionFinishDurationFallback);\n        setBodyTransform(-120);\n      } else if (!isDesktop && shiftXCurrent >= 50) {\n        closeTimeout.clear();\n        waitTransitionFinish(bodyElRef.current, function () {\n          onClose();\n        }, transitionFinishDurationFallback);\n        setBodyTransform(120);\n      } else {\n        callback = function callback() {\n          closeTimeout.set();\n          setBodyTransform(0);\n        };\n      }\n    } else {\n      closeTimeout.set();\n    }\n\n    setTouched(false);\n    callback && requestAnimationFrame(callback);\n  };\n\n  React.useEffect(function () {\n    return closeTimeout.set();\n  }, [closeTimeout]);\n  var resolvedLayout = after || isDesktop ? \"vertical\" : layout;\n  return createScopedElement(AppRootPortal, null, createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName(\"Snackbar\", platform), \"Snackbar--l-\".concat(resolvedLayout), {\n      \"Snackbar--closing\": closing,\n      \"Snackbar--touched\": touched,\n      \"Snackbar--desktop\": isDesktop\n    })\n  }), createScopedElement(Touch, {\n    vkuiClass: \"Snackbar__in\",\n    getRootRef: innerElRef,\n    onStart: onTouchStart,\n    onMoveX: onTouchMoveX,\n    onEnd: onTouchEnd\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"Snackbar__body\",\n    ref: bodyElRef\n  }, before && createScopedElement(\"div\", {\n    vkuiClass: \"Snackbar__before\"\n  }, before), createScopedElement(\"div\", {\n    vkuiClass: \"Snackbar__content\"\n  }, createScopedElement(Text, {\n    weight: \"regular\",\n    vkuiClass: \"Snackbar__content-text\"\n  }, children), action && createScopedElement(Button, {\n    align: \"left\",\n    hasHover: false,\n    mode: \"tertiary\",\n    size: \"s\",\n    vkuiClass: \"Snackbar__action\",\n    onClick: handleActionClick\n  }, action)), after && createScopedElement(\"div\", {\n    vkuiClass: \"Snackbar__after\"\n  }, after)))));\n};\n\nSnackbarComponent.displayName = \"Snackbar\";\nSnackbarComponent.defaultProps = {\n  duration: 4000,\n  layout: \"horizontal\"\n};\nexport var Snackbar = withAdaptivity(SnackbarComponent, {\n  viewWidth: true\n});","map":{"version":3,"mappings":"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","names":["React","Touch","classNames","getClassName","ANDROID","VKCOM","rubber","withAdaptivity","ViewWidth","Text","Button","AppRootPortal","useWaitTransitionFinish","usePlatform","useTimeout","SnackbarComponent","props","children","layout","action","before","after","viewWidth","duration","onActionClick","onClose","restProps","platform","waitTransitionFinish","useState","closing","setClosing","touched","setTouched","shiftXPercentRef","useRef","shiftXCurrentRef","bodyElRef","innerElRef","animationFrameRef","isDesktop","SMALL_TABLET","transitionFinishDurationFallback","close","current","handleActionClick","e","closeTimeout","setBodyTransform","percent","cancelAnimationFrame","requestAnimationFrame","style","transform","onTouchStart","clear","onTouchMoveX","event","shiftX","originalEvent","preventDefault","_bodyElRef$current","offsetWidth","onTouchEnd","callback","shiftXCurrent","expectTranslateY","set","useEffect","resolvedLayout","createScopedElement","vkuiClass","getRootRef","onStart","onMoveX","onEnd","ref","weight","align","hasHover","mode","size","onClick","displayName","defaultProps","Snackbar"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/Snackbar/Snackbar.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Touch, TouchEvent } from \"../Touch/Touch\";\nimport { classNames } from \"../../lib/classNames\";\nimport { HasPlatform } from \"../../types\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { ANDROID, VKCOM } from \"../../lib/platform\";\nimport { rubber } from \"../../lib/touch\";\nimport { withAdaptivity, ViewWidth } from \"../../hoc/withAdaptivity\";\nimport Text from \"../Typography/Text/Text\";\nimport Button from \"../Button/Button\";\nimport { AppRootPortal } from \"../AppRoot/AppRootPortal\";\nimport { useWaitTransitionFinish } from \"../../hooks/useWaitTransitionFinish\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport {\n  AdaptivityContextInterface,\n  AdaptivityProps,\n} from \"../AdaptivityProvider/AdaptivityContext\";\nimport \"./Snackbar.css\";\n\nexport interface SnackbarProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasPlatform,\n    AdaptivityProps {\n  /**\n   * Название кнопки действия в уведомлении\n   */\n  action?: string | React.ComponentType;\n\n  /**\n   * Будет вызвано при клике на кнопку действия\n   */\n  onActionClick?: (e: React.MouseEvent) => void;\n\n  /**\n   * Цветная иконка 24x24 пикселя\n   */\n  before?: React.ReactNode;\n  /**\n   * Контент в правой части, может быть `<Avatar size={32} />`\n   */\n  after?: React.ReactNode;\n  /**\n   * Варианты расположения кнопки\n   */\n  layout?: \"vertical\" | \"horizontal\";\n  /**\n   * Время в миллисекундах, через которое плашка скроется\n   */\n  duration?: number;\n  /**\n   * Обработчик закрытия уведомления\n   */\n  onClose: () => void;\n}\n\nconst SnackbarComponent: React.FC<\n  SnackbarProps & AdaptivityContextInterface\n> = (props) => {\n  const {\n    children,\n    layout,\n    action,\n    before,\n    after,\n    viewWidth,\n    duration = 0,\n    onActionClick,\n    onClose,\n    ...restProps\n  } = props;\n\n  const platform = usePlatform();\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n\n  const [closing, setClosing] = React.useState(false);\n  const [touched, setTouched] = React.useState(false);\n\n  const shiftXPercentRef = React.useRef<number>(0);\n  const shiftXCurrentRef = React.useRef<number>(0);\n\n  const bodyElRef = React.useRef<HTMLDivElement | null>(null);\n  const innerElRef = React.useRef<HTMLDivElement | null>(null);\n\n  const animationFrameRef = React.useRef<ReturnType<\n    typeof requestAnimationFrame\n  > | null>(null);\n\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  const transitionFinishDurationFallback =\n    platform === ANDROID || platform === VKCOM ? 400 : 320;\n\n  const close = () => {\n    setClosing(true);\n    waitTransitionFinish(\n      innerElRef.current,\n      () => {\n        onClose();\n      },\n      transitionFinishDurationFallback\n    );\n  };\n\n  const handleActionClick: React.MouseEventHandler<HTMLElement> = (e) => {\n    close();\n\n    if (action && typeof onActionClick === \"function\") {\n      onActionClick(e);\n    }\n  };\n\n  const closeTimeout = useTimeout(close, duration);\n\n  const setBodyTransform = (percent: number) => {\n    if (animationFrameRef.current !== null) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    animationFrameRef.current = requestAnimationFrame(() => {\n      if (bodyElRef.current) {\n        bodyElRef.current.style.transform = `translate3d(${percent}%, 0, 0)`;\n      }\n    });\n  };\n\n  const onTouchStart = closeTimeout.clear;\n\n  const onTouchMoveX = (event: TouchEvent) => {\n    const { shiftX, originalEvent } = event;\n    originalEvent.preventDefault();\n\n    if (!touched) {\n      setTouched(true);\n    }\n\n    shiftXPercentRef.current =\n      (shiftX / (bodyElRef.current?.offsetWidth ?? 0)) * 100;\n    shiftXCurrentRef.current = rubber(\n      shiftXPercentRef.current,\n      72,\n      1.2,\n      platform === ANDROID || platform === VKCOM\n    );\n\n    setBodyTransform(shiftXCurrentRef.current);\n  };\n\n  const onTouchEnd = (e: TouchEvent) => {\n    let callback: VoidFunction | undefined;\n\n    if (touched) {\n      let shiftXCurrent = shiftXCurrentRef.current;\n      const expectTranslateY = (shiftXCurrent / e.duration) * 240 * 0.6;\n      shiftXCurrent = shiftXCurrent + expectTranslateY;\n\n      if (isDesktop && shiftXCurrent <= -50) {\n        closeTimeout.clear();\n        waitTransitionFinish(\n          bodyElRef.current,\n          () => {\n            onClose();\n          },\n          transitionFinishDurationFallback\n        );\n        setBodyTransform(-120);\n      } else if (!isDesktop && shiftXCurrent >= 50) {\n        closeTimeout.clear();\n        waitTransitionFinish(\n          bodyElRef.current,\n          () => {\n            onClose();\n          },\n          transitionFinishDurationFallback\n        );\n        setBodyTransform(120);\n      } else {\n        callback = () => {\n          closeTimeout.set();\n          setBodyTransform(0);\n        };\n      }\n    } else {\n      closeTimeout.set();\n    }\n\n    setTouched(false);\n    callback && requestAnimationFrame(callback);\n  };\n\n  React.useEffect(() => closeTimeout.set(), [closeTimeout]);\n\n  const resolvedLayout = after || isDesktop ? \"vertical\" : layout;\n\n  return (\n    <AppRootPortal>\n      <div\n        {...restProps}\n        vkuiClass={classNames(\n          getClassName(\"Snackbar\", platform),\n          `Snackbar--l-${resolvedLayout}`,\n          {\n            \"Snackbar--closing\": closing,\n            \"Snackbar--touched\": touched,\n            \"Snackbar--desktop\": isDesktop,\n          }\n        )}\n      >\n        <Touch\n          vkuiClass=\"Snackbar__in\"\n          getRootRef={innerElRef}\n          onStart={onTouchStart}\n          onMoveX={onTouchMoveX}\n          onEnd={onTouchEnd}\n        >\n          <div vkuiClass=\"Snackbar__body\" ref={bodyElRef}>\n            {before && <div vkuiClass=\"Snackbar__before\">{before}</div>}\n\n            <div vkuiClass=\"Snackbar__content\">\n              <Text weight=\"regular\" vkuiClass=\"Snackbar__content-text\">\n                {children}\n              </Text>\n\n              {action && (\n                <Button\n                  align=\"left\"\n                  hasHover={false}\n                  mode=\"tertiary\"\n                  size=\"s\"\n                  vkuiClass=\"Snackbar__action\"\n                  onClick={handleActionClick}\n                >\n                  {action}\n                </Button>\n              )}\n            </div>\n\n            {after && <div vkuiClass=\"Snackbar__after\">{after}</div>}\n          </div>\n        </Touch>\n      </div>\n    </AppRootPortal>\n  );\n};\n\nSnackbarComponent.displayName = \"Snackbar\";\n\nSnackbarComponent.defaultProps = {\n  duration: 4000,\n  layout: \"horizontal\",\n};\n\nexport const Snackbar = withAdaptivity(SnackbarComponent, {\n  viewWidth: true,\n});\n"]},"metadata":{},"sourceType":"module"}