{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"alignY\", \"alignX\", \"closing\", \"hasMask\", \"fixed\", \"children\", \"onClick\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS } from \"../../lib/platform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nexport var PopoutWrapper = function PopoutWrapper(_ref) {\n  var _ref$alignY = _ref.alignY,\n      alignY = _ref$alignY === void 0 ? \"center\" : _ref$alignY,\n      _ref$alignX = _ref.alignX,\n      alignX = _ref$alignX === void 0 ? \"center\" : _ref$alignX,\n      _ref$closing = _ref.closing,\n      closing = _ref$closing === void 0 ? false : _ref$closing,\n      _ref$hasMask = _ref.hasMask,\n      hasMask = _ref$hasMask === void 0 ? true : _ref$hasMask,\n      _ref$fixed = _ref.fixed,\n      fixed = _ref$fixed === void 0 ? true : _ref$fixed,\n      children = _ref.children,\n      onClick = _ref.onClick,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(!hasMask),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      opened = _React$useState2[0],\n      setOpened = _React$useState2[1];\n\n  var elRef = React.useRef(null);\n\n  var onFadeInEnd = function onFadeInEnd(e) {\n    if (!e || e.animationName === \"vkui-animation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n\n  var animationFinishFallback = useTimeout(onFadeInEnd, platform === IOS ? 300 : 200);\n  React.useEffect(function () {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  var _useDOM = useDOM(),\n      window = _useDOM.window;\n\n  useGlobalEventListener(window, \"touchmove\", function (e) {\n    return e.preventDefault();\n  }, {\n    passive: false\n  });\n  var baseClassNames = getClassName(\"PopoutWrapper\", platform);\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(baseClassNames, \"PopoutWrapper--v-\".concat(alignY), \"PopoutWrapper--h-\".concat(alignX), {\n      \"PopoutWrapper--closing\": closing,\n      \"PopoutWrapper--opened\": opened,\n      \"PopoutWrapper--fixed\": fixed,\n      \"PopoutWrapper--masked\": hasMask\n    }),\n    onAnimationEnd: opened ? undefined : onFadeInEnd,\n    ref: elRef\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__container\"\n  }, createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__overlay\",\n    onClick: onClick\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"PopoutWrapper__content\"\n  }, children)));\n};","map":{"version":3,"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,GAAT;AACA,SAASC,UAAT;AACA,SAASC,WAAT;AACA,SAASC,sBAAT;AACA,SAASC,MAAT;AAYA,OAAO,IAAMC,aAA2C,GAAG,SAA9CA,aAA8C,OASjC;EAAA,uBARxBC,MAQwB;EAAA,IARxBA,MAQwB,4BARf,QAQe;EAAA,uBAPxBC,MAOwB;EAAA,IAPxBA,MAOwB,4BAPf,QAOe;EAAA,wBANxBC,OAMwB;EAAA,IANxBA,OAMwB,6BANd,KAMc;EAAA,wBALxBC,OAKwB;EAAA,IALxBA,OAKwB,6BALd,IAKc;EAAA,sBAJxBC,KAIwB;EAAA,IAJxBA,KAIwB,2BAJhB,IAIgB;EAAA,IAHxBC,QAGwB,QAHxBA,QAGwB;EAAA,IAFxBC,OAEwB,QAFxBA,OAEwB;EAAA,IADrBC,SACqB;;EACxB,IAAMC,QAAQ,GAAGZ,WAAW,EAA5B;;EACA,sBAA4BL,KAAK,CAACkB,QAANlB,CAAe,CAACY,OAAhBZ,CAA5B;EAAA;EAAA,IAAOmB,MAAP;EAAA,IAAeC,SAAf;;EACA,IAAMC,KAAK,GAAGrB,KAAK,CAACsB,MAANtB,CAA6B,IAA7BA,CAAd;;EAEA,IAAMuB,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAA8B;IAChD,IAAI,CAACA,CAAD,IAAMA,CAAC,CAACC,aAAFD,KAAoB,6BAA9B,EAA6D;MAC3DJ,SAAS,CAAC,IAAD,CAATA;IACD;EAHH;;EAKA,IAAMM,uBAAuB,GAAGtB,UAAU,CACxCmB,WADwC,EAExCN,QAAQ,KAAKd,GAAbc,GAAmB,GAAnBA,GAAyB,GAFe,CAA1C;EAIAjB,KAAK,CAAC2B,SAAN3B,CAAgB,YAAM;IACpB,CAACmB,MAAD,IAAWO,uBAAuB,CAACE,GAAxBF,EAAX;EADF,GAEG,CAACA,uBAAD,EAA0BP,MAA1B,CAFHnB;;EAIA,cAAmBO,MAAM,EAAzB;EAAA,IAAQsB,MAAR,WAAQA,MAAR;;EACAvB,sBAAsB,CAACuB,MAAD,EAAS,WAAT,EAAsB,UAACL,CAAD;IAAA,OAAOA,CAAC,CAACM,cAAFN,EAAP;EAAtB,GAAiD;IACrEO,OAAO,EAAE;EAD4D,CAAjD,CAAtBzB;EAIA,IAAM0B,cAAc,GAAG/B,YAAY,CAAC,eAAD,EAAkBgB,QAAlB,CAAnC;EAEA,OACEgB,wCACMjB,SADN;IAEEkB,SAAS,EAAEhC,UAAU,CACnB8B,cADmB,6BAECvB,MAFD,8BAGCC,MAHD,GAInB;MACE,0BAA0BC,OAD5B;MAEE,yBAAyBQ,MAF3B;MAGE,wBAAwBN,KAH1B;MAIE,yBAAyBD;IAJ3B,CAJmB,CAFvB;IAaEuB,cAAc,EAAEhB,MAAM,GAAGiB,SAAH,GAAeb,WAbvC;IAcEc,GAAG,EAAEhB;EAdP,IAgBEY;IAAKC,SAAS,EAAC;EAAf,GACED;IAAKC,SAAS,EAAC,wBAAf;IAAwCnB,OAAO,EAAEA;EAAjD,EADF,EAEEkB;IAAKC,SAAS,EAAC;EAAf,GAAyCpB,QAAzC,CAFF,CAhBF,CADF;AAlCK","names":["React","getClassName","classNames","IOS","useTimeout","usePlatform","useGlobalEventListener","useDOM","PopoutWrapper","alignY","alignX","closing","hasMask","fixed","children","onClick","restProps","platform","useState","opened","setOpened","elRef","useRef","onFadeInEnd","e","animationName","animationFinishFallback","useEffect","set","window","preventDefault","passive","baseClassNames","createScopedElement","vkuiClass","onAnimationEnd","undefined","ref"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/PopoutWrapper/PopoutWrapper.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { classNames } from \"../../lib/classNames\";\nimport { IOS } from \"../../lib/platform\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useGlobalEventListener } from \"../../hooks/useGlobalEventListener\";\nimport { useDOM } from \"../../lib/dom\";\nimport \"./PopoutWrapper.css\";\n\nexport interface PopoutWrapperProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  hasMask?: boolean;\n  fixed?: boolean;\n  alignY?: \"top\" | \"center\" | \"bottom\";\n  alignX?: \"left\" | \"center\" | \"right\";\n  closing?: boolean;\n}\n\nexport const PopoutWrapper: React.FC<PopoutWrapperProps> = ({\n  alignY = \"center\",\n  alignX = \"center\",\n  closing = false,\n  hasMask = true,\n  fixed = true,\n  children,\n  onClick,\n  ...restProps\n}: PopoutWrapperProps) => {\n  const platform = usePlatform();\n  const [opened, setOpened] = React.useState(!hasMask);\n  const elRef = React.useRef<HTMLDivElement>(null);\n\n  const onFadeInEnd = (e?: React.AnimationEvent) => {\n    if (!e || e.animationName === \"vkui-animation-full-fade-in\") {\n      setOpened(true);\n    }\n  };\n  const animationFinishFallback = useTimeout(\n    onFadeInEnd,\n    platform === IOS ? 300 : 200\n  );\n  React.useEffect(() => {\n    !opened && animationFinishFallback.set();\n  }, [animationFinishFallback, opened]);\n\n  const { window } = useDOM();\n  useGlobalEventListener(window, \"touchmove\", (e) => e.preventDefault(), {\n    passive: false,\n  });\n\n  const baseClassNames = getClassName(\"PopoutWrapper\", platform);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\n        baseClassNames,\n        `PopoutWrapper--v-${alignY}`,\n        `PopoutWrapper--h-${alignX}`,\n        {\n          \"PopoutWrapper--closing\": closing,\n          \"PopoutWrapper--opened\": opened,\n          \"PopoutWrapper--fixed\": fixed,\n          \"PopoutWrapper--masked\": hasMask,\n        }\n      )}\n      onAnimationEnd={opened ? undefined : onFadeInEnd}\n      ref={elRef}\n    >\n      <div vkuiClass=\"PopoutWrapper__container\">\n        <div vkuiClass=\"PopoutWrapper__overlay\" onClick={onClick} />\n        <div vkuiClass=\"PopoutWrapper__content\">{children}</div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}