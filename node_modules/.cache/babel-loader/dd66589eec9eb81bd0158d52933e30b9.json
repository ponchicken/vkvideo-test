{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"value\", \"onChange\", \"disablePast\", \"disableFuture\", \"shouldDisableDate\", \"onClose\", \"weekStartsOn\", \"getRootRef\", \"disablePickers\", \"prevMonthAriaLabel\", \"nextMonthAriaLabel\", \"changeMonthAriaLabel\", \"changeYearAriaLabel\", \"changeDayAriaLabel\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { addMonths, isSameMonth, isSameDay, isBefore, isAfter, startOfDay, endOfDay, isWithinInterval } from \"date-fns\";\nimport { CalendarHeader } from \"../CalendarHeader/CalendarHeader\";\nimport { CalendarDays } from \"../CalendarDays/CalendarDays\";\nimport { navigateDate, setTimeEqual, isLastDay, isFirstDay } from \"../../lib/calendar\";\nimport { useCalendar } from \"../../hooks/useCalendar\";\n\nvar getIsDaySelected = function getIsDaySelected(day, value) {\n  if (!(value !== null && value !== void 0 && value[0]) || !value[1]) {\n    return false;\n  }\n\n  return Boolean(isWithinInterval(day, {\n    start: startOfDay(value[0]),\n    end: endOfDay(value[1])\n  }));\n};\n\nexport var CalendarRange = function CalendarRange(_ref) {\n  var value = _ref.value,\n      onChange = _ref.onChange,\n      disablePast = _ref.disablePast,\n      disableFuture = _ref.disableFuture,\n      shouldDisableDate = _ref.shouldDisableDate,\n      onClose = _ref.onClose,\n      _ref$weekStartsOn = _ref.weekStartsOn,\n      weekStartsOn = _ref$weekStartsOn === void 0 ? 1 : _ref$weekStartsOn,\n      getRootRef = _ref.getRootRef,\n      disablePickers = _ref.disablePickers,\n      prevMonthAriaLabel = _ref.prevMonthAriaLabel,\n      nextMonthAriaLabel = _ref.nextMonthAriaLabel,\n      changeMonthAriaLabel = _ref.changeMonthAriaLabel,\n      changeYearAriaLabel = _ref.changeYearAriaLabel,\n      _ref$changeDayAriaLab = _ref.changeDayAriaLabel,\n      changeDayAriaLabel = _ref$changeDayAriaLab === void 0 ? \"Изменить день\" : _ref$changeDayAriaLab,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useCalendar = useCalendar({\n    value: value,\n    disableFuture: disableFuture,\n    disablePast: disablePast,\n    shouldDisableDate: shouldDisableDate\n  }),\n      viewDate = _useCalendar.viewDate,\n      setViewDate = _useCalendar.setViewDate,\n      setPrevMonth = _useCalendar.setPrevMonth,\n      setNextMonth = _useCalendar.setNextMonth,\n      focusedDay = _useCalendar.focusedDay,\n      setFocusedDay = _useCalendar.setFocusedDay,\n      isDayFocused = _useCalendar.isDayFocused,\n      isDayDisabled = _useCalendar.isDayDisabled,\n      resetSelectedDay = _useCalendar.resetSelectedDay;\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      hintedDate = _React$useState2[0],\n      setHintedDate = _React$useState2[1];\n\n  var secondViewDate = addMonths(viewDate, 1);\n  var handleKeyDown = React.useCallback(function (event) {\n    if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(event.key)) {\n      event.preventDefault();\n    }\n\n    var newFocusedDay = navigateDate(focusedDay !== null && focusedDay !== void 0 ? focusedDay : value === null || value === void 0 ? void 0 : value[1], event.key);\n\n    if (newFocusedDay && !isSameMonth(newFocusedDay, viewDate) && !isSameMonth(newFocusedDay, addMonths(viewDate, 1))) {\n      setViewDate(newFocusedDay);\n    }\n\n    setFocusedDay(newFocusedDay);\n  }, [focusedDay, setFocusedDay, setViewDate, value, viewDate]);\n  var getNewValue = React.useCallback(function (date) {\n    if (!value) {\n      return [date, null];\n    }\n\n    var start = value[0];\n    var end = value[1];\n\n    if (start && isSameDay(date, start) || end && isSameDay(date, end)) {\n      return [setTimeEqual(date, start), setTimeEqual(date, end)];\n    } else if (start && isBefore(date, start)) {\n      return [setTimeEqual(date, start), end];\n    } else if (start && isAfter(date, start)) {\n      return [start, setTimeEqual(date, end)];\n    }\n\n    return value;\n  }, [value]);\n  var onDayChange = React.useCallback(function (date) {\n    onChange === null || onChange === void 0 ? void 0 : onChange(getNewValue(date));\n    setHintedDate(undefined);\n  }, [onChange, getNewValue]);\n  var isDaySelected = React.useCallback(function (day) {\n    return getIsDaySelected(day, value);\n  }, [value]);\n  var isDayActive = React.useCallback(function (day) {\n    return Boolean((value === null || value === void 0 ? void 0 : value[0]) && isSameDay(day, value[0]) || (value === null || value === void 0 ? void 0 : value[1]) && isSameDay(day, value[1]));\n  }, [value]);\n  var isDaySelectionEnd = React.useCallback(function (day, dayOfWeek) {\n    return Boolean(isLastDay(day, dayOfWeek) || (value === null || value === void 0 ? void 0 : value[1]) && isSameDay(day, value[1]));\n  }, [value]);\n  var isHintedDaySelectionEnd = React.useCallback(function (day, dayOfWeek) {\n    return Boolean(isLastDay(day, dayOfWeek) || (hintedDate === null || hintedDate === void 0 ? void 0 : hintedDate[1]) && isSameDay(day, hintedDate[1]));\n  }, [hintedDate]);\n  var isDaySelectionStart = React.useCallback(function (day, dayOfWeek) {\n    return Boolean(isFirstDay(day, dayOfWeek) || (value === null || value === void 0 ? void 0 : value[0]) && isSameDay(day, value[0]));\n  }, [value]);\n  var isHintedDaySelectionStart = React.useCallback(function (day, dayOfWeek) {\n    return Boolean(isFirstDay(day, dayOfWeek) || (hintedDate === null || hintedDate === void 0 ? void 0 : hintedDate[0]) && isSameDay(day, hintedDate[0]));\n  }, [hintedDate]);\n  var onDayEnter = React.useCallback(function (date) {\n    return setHintedDate(getNewValue(date));\n  }, [setHintedDate, getNewValue]);\n  var onDayLeave = React.useCallback(function () {\n    return setHintedDate(undefined);\n  }, [setHintedDate]);\n  var isDayHinted = React.useCallback(function (day) {\n    return getIsDaySelected(day, hintedDate);\n  }, [hintedDate]);\n  return createScopedElement(\"div\", _extends({}, props, {\n    ref: getRootRef,\n    vkuiClass: \"CalendarRange\"\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"CalendarRange__inner\"\n  }, createScopedElement(CalendarHeader, {\n    viewDate: viewDate,\n    onChange: setViewDate,\n    nextMonth: false,\n    onPrevMonth: setPrevMonth,\n    disablePickers: disablePickers,\n    vkuiClass: \"CalendarRange__header\",\n    prevMonthAriaLabel: prevMonthAriaLabel,\n    nextMonthAriaLabel: nextMonthAriaLabel,\n    changeMonthAriaLabel: changeMonthAriaLabel,\n    changeYearAriaLabel: changeYearAriaLabel\n  }), createScopedElement(CalendarDays, {\n    viewDate: viewDate,\n    value: value,\n    weekStartsOn: weekStartsOn,\n    onKeyDown: handleKeyDown,\n    isDayFocused: isDayFocused,\n    onDayChange: onDayChange,\n    isDaySelected: isDaySelected,\n    isDayActive: isDayActive,\n    isDaySelectionEnd: isDaySelectionEnd,\n    isDaySelectionStart: isDaySelectionStart,\n    isDayHinted: isDayHinted,\n    onDayEnter: onDayEnter,\n    onDayLeave: onDayLeave,\n    isHintedDaySelectionEnd: isHintedDaySelectionEnd,\n    isHintedDaySelectionStart: isHintedDaySelectionStart,\n    isDayDisabled: isDayDisabled,\n    \"aria-label\": changeDayAriaLabel\n  })), createScopedElement(\"div\", {\n    vkuiClass: \"CalendarRange__inner\"\n  }, createScopedElement(CalendarHeader, {\n    viewDate: secondViewDate,\n    onChange: setViewDate,\n    prevMonth: false,\n    onNextMonth: setNextMonth,\n    disablePickers: disablePickers,\n    vkuiClass: \"CalendarRange__header\",\n    prevMonthAriaLabel: prevMonthAriaLabel,\n    nextMonthAriaLabel: nextMonthAriaLabel,\n    changeMonthAriaLabel: changeMonthAriaLabel,\n    changeYearAriaLabel: changeYearAriaLabel\n  }), createScopedElement(CalendarDays, {\n    viewDate: secondViewDate,\n    value: value,\n    weekStartsOn: weekStartsOn,\n    \"aria-label\": changeDayAriaLabel,\n    onKeyDown: handleKeyDown,\n    isDayFocused: isDayFocused,\n    onDayChange: onDayChange,\n    isDaySelected: isDaySelected,\n    isDayActive: isDayActive,\n    isDaySelectionEnd: isDaySelectionEnd,\n    isDaySelectionStart: isDaySelectionStart,\n    isDayHinted: isDayHinted,\n    onDayEnter: onDayEnter,\n    onDayLeave: onDayLeave,\n    isHintedDaySelectionEnd: isHintedDaySelectionEnd,\n    isHintedDaySelectionStart: isHintedDaySelectionStart,\n    isDayDisabled: isDayDisabled,\n    tabIndex: 0,\n    onBlur: resetSelectedDay\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","addMonths","isSameMonth","isSameDay","isBefore","isAfter","startOfDay","endOfDay","isWithinInterval","CalendarHeader","CalendarDays","navigateDate","setTimeEqual","isLastDay","isFirstDay","useCalendar","getIsDaySelected","day","value","Boolean","start","end","CalendarRange","onChange","disablePast","disableFuture","shouldDisableDate","onClose","weekStartsOn","getRootRef","disablePickers","prevMonthAriaLabel","nextMonthAriaLabel","changeMonthAriaLabel","changeYearAriaLabel","changeDayAriaLabel","props","viewDate","setViewDate","setPrevMonth","setNextMonth","focusedDay","setFocusedDay","isDayFocused","isDayDisabled","resetSelectedDay","useState","hintedDate","setHintedDate","secondViewDate","handleKeyDown","useCallback","event","includes","key","preventDefault","newFocusedDay","getNewValue","date","onDayChange","undefined","isDaySelected","isDayActive","isDaySelectionEnd","dayOfWeek","isHintedDaySelectionEnd","isDaySelectionStart","isHintedDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","createScopedElement","ref","vkuiClass","nextMonth","onPrevMonth","onKeyDown","prevMonth","onNextMonth","tabIndex","onBlur"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/CalendarRange/CalendarRange.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {\n  addMonths,\n  isSameMonth,\n  isSameDay,\n  isBefore,\n  isAfter,\n  startOfDay,\n  endOfDay,\n  isWithinInterval,\n} from \"date-fns\";\nimport {\n  CalendarHeader,\n  CalendarHeaderProps,\n} from \"../CalendarHeader/CalendarHeader\";\nimport { CalendarDays } from \"../CalendarDays/CalendarDays\";\nimport {\n  navigateDate,\n  setTimeEqual,\n  isLastDay,\n  isFirstDay,\n} from \"../../lib/calendar\";\nimport { useCalendar } from \"../../hooks/useCalendar\";\nimport { HasRootRef } from \"../../types\";\nimport \"./CalendarRange.css\";\n\nexport interface CalendarRangeProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onChange\">,\n    Pick<\n      CalendarHeaderProps,\n      | \"prevMonthAriaLabel\"\n      | \"nextMonthAriaLabel\"\n      | \"changeMonthAriaLabel\"\n      | \"changeYearAriaLabel\"\n    >,\n    HasRootRef<HTMLDivElement> {\n  value?: Array<Date | null>;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  disablePickers?: boolean;\n  changeDayAriaLabel?: string;\n  weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  onChange?(value?: Array<Date | null>): void;\n  shouldDisableDate?(value: Date): boolean;\n  onClose?(): void;\n}\n\nconst getIsDaySelected = (day: Date, value?: Array<Date | null>) => {\n  if (!value?.[0] || !value[1]) {\n    return false;\n  }\n\n  return Boolean(\n    isWithinInterval(day, {\n      start: startOfDay(value[0]),\n      end: endOfDay(value[1]),\n    })\n  );\n};\n\nexport const CalendarRange: React.FC<CalendarRangeProps> = ({\n  value,\n  onChange,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onClose,\n  weekStartsOn = 1,\n  getRootRef,\n  disablePickers,\n  prevMonthAriaLabel,\n  nextMonthAriaLabel,\n  changeMonthAriaLabel,\n  changeYearAriaLabel,\n  changeDayAriaLabel = \"Изменить день\",\n  ...props\n}) => {\n  const {\n    viewDate,\n    setViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  } = useCalendar({ value, disableFuture, disablePast, shouldDisableDate });\n  const [hintedDate, setHintedDate] = React.useState<Array<Date | null>>();\n  const secondViewDate = addMonths(viewDate, 1);\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      if (\n        [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(event.key)\n      ) {\n        event.preventDefault();\n      }\n\n      const newFocusedDay = navigateDate(focusedDay ?? value?.[1], event.key);\n\n      if (\n        newFocusedDay &&\n        !isSameMonth(newFocusedDay, viewDate) &&\n        !isSameMonth(newFocusedDay, addMonths(viewDate, 1))\n      ) {\n        setViewDate(newFocusedDay);\n      }\n      setFocusedDay(newFocusedDay);\n    },\n    [focusedDay, setFocusedDay, setViewDate, value, viewDate]\n  );\n\n  const getNewValue = React.useCallback(\n    (date: Date) => {\n      if (!value) {\n        return [date, null];\n      }\n\n      const start = value[0];\n      const end = value[1];\n      if ((start && isSameDay(date, start)) || (end && isSameDay(date, end))) {\n        return [setTimeEqual(date, start), setTimeEqual(date, end)];\n      } else if (start && isBefore(date, start)) {\n        return [setTimeEqual(date, start), end];\n      } else if (start && isAfter(date, start)) {\n        return [start, setTimeEqual(date, end)];\n      }\n\n      return value;\n    },\n    [value]\n  );\n\n  const onDayChange = React.useCallback(\n    (date: Date) => {\n      onChange?.(getNewValue(date));\n      setHintedDate(undefined);\n    },\n    [onChange, getNewValue]\n  );\n\n  const isDaySelected = React.useCallback(\n    (day: Date) => getIsDaySelected(day, value),\n    [value]\n  );\n\n  const isDayActive = React.useCallback(\n    (day: Date) =>\n      Boolean(\n        (value?.[0] && isSameDay(day, value[0])) ||\n          (value?.[1] && isSameDay(day, value[1]))\n      ),\n    [value]\n  );\n\n  const isDaySelectionEnd = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(\n        isLastDay(day, dayOfWeek) || (value?.[1] && isSameDay(day, value[1]))\n      ),\n    [value]\n  );\n\n  const isHintedDaySelectionEnd = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(\n        isLastDay(day, dayOfWeek) ||\n          (hintedDate?.[1] && isSameDay(day, hintedDate[1]))\n      ),\n    [hintedDate]\n  );\n\n  const isDaySelectionStart = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(\n        isFirstDay(day, dayOfWeek) || (value?.[0] && isSameDay(day, value[0]))\n      ),\n    [value]\n  );\n\n  const isHintedDaySelectionStart = React.useCallback(\n    (day: Date, dayOfWeek: number) =>\n      Boolean(\n        isFirstDay(day, dayOfWeek) ||\n          (hintedDate?.[0] && isSameDay(day, hintedDate[0]))\n      ),\n    [hintedDate]\n  );\n\n  const onDayEnter = React.useCallback(\n    (date: Date) => setHintedDate(getNewValue(date)),\n    [setHintedDate, getNewValue]\n  );\n\n  const onDayLeave = React.useCallback(\n    () => setHintedDate(undefined),\n    [setHintedDate]\n  );\n\n  const isDayHinted = React.useCallback(\n    (day: Date) => getIsDaySelected(day, hintedDate),\n    [hintedDate]\n  );\n\n  return (\n    <div {...props} ref={getRootRef} vkuiClass=\"CalendarRange\">\n      <div vkuiClass=\"CalendarRange__inner\">\n        <CalendarHeader\n          viewDate={viewDate}\n          onChange={setViewDate}\n          nextMonth={false}\n          onPrevMonth={setPrevMonth}\n          disablePickers={disablePickers}\n          vkuiClass=\"CalendarRange__header\"\n          prevMonthAriaLabel={prevMonthAriaLabel}\n          nextMonthAriaLabel={nextMonthAriaLabel}\n          changeMonthAriaLabel={changeMonthAriaLabel}\n          changeYearAriaLabel={changeYearAriaLabel}\n        />\n        <CalendarDays\n          viewDate={viewDate}\n          value={value}\n          weekStartsOn={weekStartsOn}\n          onKeyDown={handleKeyDown}\n          isDayFocused={isDayFocused}\n          onDayChange={onDayChange}\n          isDaySelected={isDaySelected}\n          isDayActive={isDayActive}\n          isDaySelectionEnd={isDaySelectionEnd}\n          isDaySelectionStart={isDaySelectionStart}\n          isDayHinted={isDayHinted}\n          onDayEnter={onDayEnter}\n          onDayLeave={onDayLeave}\n          isHintedDaySelectionEnd={isHintedDaySelectionEnd}\n          isHintedDaySelectionStart={isHintedDaySelectionStart}\n          isDayDisabled={isDayDisabled}\n          aria-label={changeDayAriaLabel}\n        />\n      </div>\n      <div vkuiClass=\"CalendarRange__inner\">\n        <CalendarHeader\n          viewDate={secondViewDate}\n          onChange={setViewDate}\n          prevMonth={false}\n          onNextMonth={setNextMonth}\n          disablePickers={disablePickers}\n          vkuiClass=\"CalendarRange__header\"\n          prevMonthAriaLabel={prevMonthAriaLabel}\n          nextMonthAriaLabel={nextMonthAriaLabel}\n          changeMonthAriaLabel={changeMonthAriaLabel}\n          changeYearAriaLabel={changeYearAriaLabel}\n        />\n        <CalendarDays\n          viewDate={secondViewDate}\n          value={value}\n          weekStartsOn={weekStartsOn}\n          aria-label={changeDayAriaLabel}\n          onKeyDown={handleKeyDown}\n          isDayFocused={isDayFocused}\n          onDayChange={onDayChange}\n          isDaySelected={isDaySelected}\n          isDayActive={isDayActive}\n          isDaySelectionEnd={isDaySelectionEnd}\n          isDaySelectionStart={isDaySelectionStart}\n          isDayHinted={isDayHinted}\n          onDayEnter={onDayEnter}\n          onDayLeave={onDayLeave}\n          isHintedDaySelectionEnd={isHintedDaySelectionEnd}\n          isHintedDaySelectionStart={isHintedDaySelectionStart}\n          isDayDisabled={isDayDisabled}\n          tabIndex={0}\n          onBlur={resetSelectedDay}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}