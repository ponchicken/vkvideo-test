{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"photos\", \"visibleCount\", \"size\", \"layout\", \"children\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport Subhead from \"../Typography/Subhead/Subhead\";\nimport { createMasks } from \"./masks\";\nimport { useDOM } from \"../../lib/dom\";\n\nvar UsersStack = function UsersStack(props) {\n  var platform = usePlatform();\n\n  var _props$photos = props.photos,\n      photos = _props$photos === void 0 ? [] : _props$photos,\n      _props$visibleCount = props.visibleCount,\n      visibleCount = _props$visibleCount === void 0 ? 0 : _props$visibleCount,\n      size = props.size,\n      layout = props.layout,\n      children = props.children,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document;\n\n  useIsomorphicLayoutEffect(function () {\n    createMasks(document);\n  }, [document]);\n  var othersCount = Math.max(0, photos.length - visibleCount);\n  var canShowOthers = othersCount > 0 && size === \"m\";\n  var photosShown = photos.slice(0, visibleCount);\n  return createScopedElement(\"div\", _extends({}, restProps, {\n    vkuiClass: classNames(getClassName(\"UsersStack\", platform), \"UsersStack--size-\".concat(size), \"UsersStack--l-\".concat(layout), {\n      \"UsersStack--others\": canShowOthers\n    })\n  }), createScopedElement(\"div\", {\n    vkuiClass: \"UsersStack__photos\",\n    role: \"presentation\"\n  }, photosShown.map(function (photo, i) {\n    return createScopedElement(\"div\", {\n      key: i,\n      vkuiClass: \"UsersStack__photo\",\n      style: {\n        backgroundImage: \"url(\".concat(photo, \")\")\n      }\n    });\n  }), canShowOthers && createScopedElement(Caption, {\n    weight: \"1\",\n    vkuiClass: \"UsersStack__photo UsersStack__photo--others\",\n    \"aria-hidden\": \"true\"\n  }, createScopedElement(\"span\", null, \"+\", othersCount))), hasReactNode(children) && createScopedElement(Subhead, {\n    Component: \"span\",\n    vkuiClass: \"UsersStack__text\"\n  }, children));\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: \"s\",\n  visibleCount: 3,\n  layout: \"horizontal\"\n}; // eslint-disable-next-line import/no-default-export\n\nexport default /*#__PURE__*/React.memo(UsersStack);","map":{"version":3,"mappings":";;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT;AACA,SAASC,WAAT;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,yBAAT;AACA,SAASC,OAAT;AACA,OAAOC,OAAP;AACA,SAASC,WAAT;AACA,SAASC,MAAT;;AAuBA,IAAMC,UAAqC,GAAG,SAAxCA,UAAwC,CAACC,KAAD,EAA4B;EACxE,IAAMC,QAAQ,GAAGV,WAAW,EAA5B;;EACA,oBAOIS,KAPJ,CACEE,MADF;EAAA,IACEA,MADF,8BACW,EADX;EAAA,0BAOIF,KAPJ,CAEEG,YAFF;EAAA,IAEEA,YAFF,oCAEiB,CAFjB;EAAA,IAGEC,IAHF,GAOIJ,KAPJ,CAGEI,IAHF;EAAA,IAIEC,MAJF,GAOIL,KAPJ,CAIEK,MAJF;EAAA,IAKEC,QALF,GAOIN,KAPJ,CAKEM,QALF;EAAA,IAMKC,SANL,4BAOIP,KAPJ;;EAQA,cAAqBF,MAAM,EAA3B;EAAA,IAAQU,QAAR,WAAQA,QAAR;;EAEAd,yBAAyB,CAAC,YAAM;IAC9BG,WAAW,CAACW,QAAD,CAAXX;EADuB,GAEtB,CAACW,QAAD,CAFsB,CAAzBd;EAIA,IAAMe,WAAW,GAAGC,IAAI,CAACC,GAALD,CAAS,CAATA,EAAYR,MAAM,CAACU,MAAPV,GAAgBC,YAA5BO,CAApB;EACA,IAAMG,aAAa,GAAGJ,WAAW,GAAG,CAAdA,IAAmBL,IAAI,KAAK,GAAlD;EAEA,IAAMU,WAAW,GAAGZ,MAAM,CAACa,KAAPb,CAAa,CAAbA,EAAgBC,YAAhBD,CAApB;EAEA,OACEc,wCACMT,SADN;IAEEU,SAAS,EAAExB,UAAU,CACnBH,YAAY,CAAC,YAAD,EAAeW,QAAf,CADO,6BAECG,IAFD,2BAGFC,MAHE,GAInB;MACE,sBAAsBQ;IADxB,CAJmB;EAFvB,IAWEG;IAAKC,SAAS,EAAC,oBAAf;IAAoCC,IAAI,EAAC;EAAzC,GACGJ,WAAW,CAACK,GAAZL,CAAgB,UAACM,KAAD,EAAQC,CAAR;IAAA,OACfL;MACEM,GAAG,EAAED,CADP;MAEEJ,SAAS,EAAC,mBAFZ;MAGEM,KAAK,EAAE;QAAEC,eAAe,gBAASJ,KAAT;MAAjB;IAHT,EADe;EAAhB,EADH,EASGP,aAAa,IACZG,oBAACrB,OAAD;IACE8B,MAAM,EAAC,GADT;IAEER,SAAS,EAAC,6CAFZ;IAGE,eAAY;EAHd,GAKED,uCAAQP,WAAR,CALF,CAVJ,CAXF,EA8BGjB,YAAY,CAACc,QAAD,CAAZd,IACCwB,oBAACpB,OAAD;IAAS8B,SAAS,EAAC,MAAnB;IAA0BT,SAAS,EAAC;EAApC,GACGX,QADH,CA/BJ,CADF;AArBF;;AA6DAP,UAAU,CAAC4B,YAAX5B,GAA0B;EACxBG,MAAM,EAAE,EADgB;EAExBE,IAAI,EAAE,GAFkB;EAGxBD,YAAY,EAAE,CAHU;EAIxBE,MAAM,EAAE;AAJgB,CAA1BN,C,CAOA;;AACA,4BAAeV,KAAK,CAACuC,IAANvC,CAAWU,UAAXV,CAAf","names":["React","getClassName","usePlatform","hasReactNode","classNames","useIsomorphicLayoutEffect","Caption","Subhead","createMasks","useDOM","UsersStack","props","platform","photos","visibleCount","size","layout","children","restProps","document","othersCount","Math","max","length","canShowOthers","photosShown","slice","createScopedElement","vkuiClass","role","map","photo","i","key","style","backgroundImage","weight","Component","defaultProps","memo"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/UsersStack/UsersStack.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { hasReactNode } from \"../../lib/utils\";\nimport { classNames } from \"../../lib/classNames\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { Caption } from \"../Typography/Caption/Caption\";\nimport Subhead from \"../Typography/Subhead/Subhead\";\nimport { createMasks } from \"./masks\";\nimport { useDOM } from \"../../lib/dom\";\nimport \"./UsersStack.css\";\n\nexport interface UsersStackProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Массив ссылок на фотографии\n   */\n  photos?: string[];\n  /**\n   * Размер аватарок\n   */\n  size?: \"xs\" | \"s\" | \"m\";\n  /**\n   * Вертикальный режим рекомендуется использовать с размером `m`\n   */\n  layout?: \"vertical\" | \"horizontal\";\n  /**\n   * Количество аватарок, которые будут показаны.\n   * Если в массиве `photos` больше элементов и используется размер `m`, то будет показано количество остальных элементов\n   */\n  visibleCount?: number;\n}\n\nconst UsersStack: React.FC<UsersStackProps> = (props: UsersStackProps) => {\n  const platform = usePlatform();\n  const {\n    photos = [],\n    visibleCount = 0,\n    size,\n    layout,\n    children,\n    ...restProps\n  } = props;\n  const { document } = useDOM();\n\n  useIsomorphicLayoutEffect(() => {\n    createMasks(document);\n  }, [document]);\n\n  const othersCount = Math.max(0, photos.length - visibleCount);\n  const canShowOthers = othersCount > 0 && size === \"m\";\n\n  const photosShown = photos.slice(0, visibleCount);\n\n  return (\n    <div\n      {...restProps}\n      vkuiClass={classNames(\n        getClassName(\"UsersStack\", platform),\n        `UsersStack--size-${size}`,\n        `UsersStack--l-${layout}`,\n        {\n          \"UsersStack--others\": canShowOthers,\n        }\n      )}\n    >\n      <div vkuiClass=\"UsersStack__photos\" role=\"presentation\">\n        {photosShown.map((photo, i) => (\n          <div\n            key={i}\n            vkuiClass=\"UsersStack__photo\"\n            style={{ backgroundImage: `url(${photo})` }}\n          />\n        ))}\n\n        {canShowOthers && (\n          <Caption\n            weight=\"1\"\n            vkuiClass=\"UsersStack__photo UsersStack__photo--others\"\n            aria-hidden=\"true\"\n          >\n            <span>+{othersCount}</span>\n          </Caption>\n        )}\n      </div>\n      {hasReactNode(children) && (\n        <Subhead Component=\"span\" vkuiClass=\"UsersStack__text\">\n          {children}\n        </Subhead>\n      )}\n    </div>\n  );\n};\n\nUsersStack.defaultProps = {\n  photos: [],\n  size: \"s\",\n  visibleCount: 3,\n  layout: \"horizontal\",\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default React.memo(UsersStack);\n"]},"metadata":{},"sourceType":"module"}