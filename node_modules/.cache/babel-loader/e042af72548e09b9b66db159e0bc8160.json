{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"children\", \"Component\", \"onClick\", \"onKeyDown\", \"activeEffectDelay\", \"stopPropagation\", \"getRootRef\", \"sizeX\", \"hasMouse\", \"deviceHasHover\", \"hasHover\", \"hoverMode\", \"hasActive\", \"activeMode\", \"focusVisibleMode\", \"onEnter\", \"onLeave\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport mitt from \"mitt\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { Touch } from \"../Touch/Touch\";\nimport TouchRootContext from \"../Touch/TouchContext\";\nimport { classNames } from \"../../lib/classNames\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { ANDROID } from \"../../lib/platform\";\nimport { getOffsetRect } from \"../../lib/offset\";\nimport { coordX, coordY } from \"../../lib/touch\";\nimport { withAdaptivity } from \"../../hoc/withAdaptivity\";\nimport { shouldTriggerClickOnEnterOrSpace } from \"../../lib/accessibility\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { FocusVisible } from \"../FocusVisible/FocusVisible\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useFocusVisible } from \"../../hooks/useFocusVisible\";\nimport { callMultiple } from \"../../lib/callMultiple\";\nimport { useBooleanState } from \"../../hooks/useBooleanState\";\nexport var ACTIVE_DELAY = 70;\nexport var ACTIVE_EFFECT_DELAY = 600;\nvar activeBus = mitt();\nvar TapState = {\n  none: 0,\n  pending: 1,\n  active: 2,\n  exiting: 3\n};\nvar TappableContext = /*#__PURE__*/React.createContext({\n  onHoverChange: noop\n});\n\nfunction useActivity(hasActive, stopDelay) {\n  var id = React.useMemo(function () {\n    return Math.round(Math.random() * 1e8).toString(16);\n  }, []);\n\n  var _React$useState = React.useState(TapState.none),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activity = _React$useState2[0],\n      setActivity = _React$useState2[1];\n\n  var _stop = function _stop() {\n    return setActivity(TapState.none);\n  };\n\n  var start = function start() {\n    return hasActive && setActivity(TapState.active);\n  };\n\n  var delayStart = function delayStart() {\n    hasActive && setActivity(TapState.pending);\n  };\n\n  var activeTimeout = useTimeout(start, ACTIVE_DELAY);\n  var stopTimeout = useTimeout(_stop, stopDelay);\n  useIsomorphicLayoutEffect(function () {\n    if (activity === TapState.pending) {\n      activeTimeout.set();\n      return activeTimeout.clear;\n    }\n\n    if (activity === TapState.exiting) {\n      return stopTimeout.clear;\n    }\n\n    if (activity === TapState.active) {\n      activeBus.emit(\"active\", id);\n    }\n\n    return noop;\n  }, [activity]);\n  useIsomorphicLayoutEffect(function () {\n    if (activity === TapState.none) {\n      return noop;\n    }\n\n    var onActiveChange = function onActiveChange(activeId) {\n      activeId !== id && _stop();\n    };\n\n    activeBus.on(\"active\", onActiveChange);\n    return function () {\n      return activeBus.off(\"active\", onActiveChange);\n    };\n  }, [activity === TapState.none]);\n  useIsomorphicLayoutEffect(function () {\n    !hasActive && _stop();\n  }, [hasActive]);\n\n  var stop = function stop(delay) {\n    if (delay) {\n      setActivity(TapState.exiting);\n      return stopTimeout.set(delay);\n    }\n\n    _stop();\n  };\n\n  return [activity, {\n    delayStart: delayStart,\n    start: start,\n    stop: stop\n  }];\n}\n\nvar Tappable = function Tappable(_ref) {\n  var _classNames;\n\n  var children = _ref.children,\n      Component = _ref.Component,\n      onClick = _ref.onClick,\n      _onKeyDown = _ref.onKeyDown,\n      _ref$activeEffectDela = _ref.activeEffectDelay,\n      activeEffectDelay = _ref$activeEffectDela === void 0 ? ACTIVE_EFFECT_DELAY : _ref$activeEffectDela,\n      _ref$stopPropagation = _ref.stopPropagation,\n      stopPropagation = _ref$stopPropagation === void 0 ? false : _ref$stopPropagation,\n      getRootRef = _ref.getRootRef,\n      sizeX = _ref.sizeX,\n      hasMouse = _ref.hasMouse,\n      deviceHasHover = _ref.deviceHasHover,\n      _ref$hasHover = _ref.hasHover,\n      _hasHover = _ref$hasHover === void 0 ? true : _ref$hasHover,\n      _ref$hoverMode = _ref.hoverMode,\n      hoverMode = _ref$hoverMode === void 0 ? \"background\" : _ref$hoverMode,\n      _ref$hasActive = _ref.hasActive,\n      _hasActive = _ref$hasActive === void 0 ? true : _ref$hasActive,\n      _ref$activeMode = _ref.activeMode,\n      activeMode = _ref$activeMode === void 0 ? \"background\" : _ref$activeMode,\n      _ref$focusVisibleMode = _ref.focusVisibleMode,\n      focusVisibleMode = _ref$focusVisibleMode === void 0 ? \"inside\" : _ref$focusVisibleMode,\n      onEnter = _ref.onEnter,\n      onLeave = _ref.onLeave,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  Component = Component || (props.href ? \"a\" : \"div\");\n\n  var _React$useContext = React.useContext(TappableContext),\n      onHoverChange = _React$useContext.onHoverChange;\n\n  var insideTouchRoot = React.useContext(TouchRootContext);\n  var platform = usePlatform();\n\n  var _useFocusVisible = useFocusVisible(),\n      focusVisible = _useFocusVisible.focusVisible,\n      onBlur = _useFocusVisible.onBlur,\n      onFocus = _useFocusVisible.onFocus;\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      clicks = _React$useState4[0],\n      setClicks = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      childHover = _React$useState6[0],\n      setChildHover = _React$useState6[1];\n\n  var _useBooleanState = useBooleanState(false),\n      _hovered = _useBooleanState.value,\n      setHoveredTrue = _useBooleanState.setTrue,\n      setHoveredFalse = _useBooleanState.setFalse;\n\n  var hovered = _hovered && !props.disabled;\n  var hasActive = _hasActive && !childHover && !props.disabled;\n  var hasHover = deviceHasHover && _hasHover && !childHover;\n  var isCustomElement = Component !== \"a\" && Component !== \"button\" && !props.contentEditable;\n  var isPresetHoverMode = [\"opacity\", \"background\"].includes(hoverMode);\n  var isPresetActiveMode = [\"opacity\", \"background\"].includes(activeMode);\n  var isPresetFocusVisibleMode = [\"inside\", \"outside\"].includes(focusVisibleMode);\n\n  var _useActivity = useActivity(hasActive, activeEffectDelay),\n      _useActivity2 = _slicedToArray(_useActivity, 2),\n      activity = _useActivity2[0],\n      _useActivity2$ = _useActivity2[1],\n      start = _useActivity2$.start,\n      stop = _useActivity2$.stop,\n      delayStart = _useActivity2$.delayStart;\n\n  var active = activity === TapState.active || activity === TapState.exiting;\n  var containerRef = useExternRef(getRootRef); // hover propagation\n\n  var childContext = React.useRef({\n    onHoverChange: setChildHover\n  }).current;\n  useIsomorphicLayoutEffect(function () {\n    if (!hovered) {\n      return noop;\n    }\n\n    onHoverChange(true);\n    return function () {\n      return onHoverChange(false);\n    };\n  }, [hovered]);\n  /*\n   * [a11y]\n   * Обрабатывает событие onkeydown\n   * для кастомных доступных элементов:\n   * - role=\"link\" (активация по Enter)\n   * - role=\"button\" (активация по Space и Enter)\n   */\n\n  function onKeyDown(e) {\n    if (isCustomElement && shouldTriggerClickOnEnterOrSpace(e)) {\n      var _containerRef$current;\n\n      e.preventDefault();\n      (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.click();\n    }\n  }\n\n  function onStart(_ref2) {\n    var originalEvent = _ref2.originalEvent;\n\n    if (hasActive) {\n      if (originalEvent.touches && originalEvent.touches.length > 1) {\n        // r сожалению я так и не понял, что это делает и можно ли упихнуть его в Touch\n        return stop();\n      }\n\n      if (platform === ANDROID) {\n        var _getOffsetRect = getOffsetRect(containerRef.current),\n            top = _getOffsetRect.top,\n            left = _getOffsetRect.left;\n\n        var x = coordX(originalEvent) - (left !== null && left !== void 0 ? left : 0);\n        var y = coordY(originalEvent) - (top !== null && top !== void 0 ? top : 0);\n        setClicks([].concat(_toConsumableArray(clicks), [{\n          x: x,\n          y: y,\n          id: Date.now().toString()\n        }]));\n      }\n\n      delayStart();\n    }\n  }\n\n  function onMove(_ref3) {\n    var isSlide = _ref3.isSlide;\n\n    if (isSlide) {\n      stop();\n    }\n  }\n\n  function onEnd(_ref4) {\n    var duration = _ref4.duration;\n\n    if (activity === TapState.none) {\n      return;\n    }\n\n    if (activity === TapState.pending) {\n      // активировать при коротком тапе\n      start();\n    } // отключить без задержки при длинном тапе\n\n\n    var activeDuraion = duration - ACTIVE_DELAY;\n    stop(activeDuraion >= 100 ? 0 : activeEffectDelay - activeDuraion);\n  }\n\n  var classes = classNames(getClassName(\"Tappable\", platform), \"Tappable--sizeX-\".concat(sizeX), hasHover && hovered && !isPresetHoverMode && hoverMode, hasActive && active && !isPresetActiveMode && activeMode, focusVisible && !isPresetFocusVisibleMode && focusVisibleMode, (_classNames = {\n    \"Tappable--active\": hasActive && active,\n    \"Tappable--mouse\": hasMouse\n  }, _defineProperty(_classNames, \"Tappable--hover-\".concat(hoverMode), hasHover && hovered && isPresetHoverMode), _defineProperty(_classNames, \"Tappable--active-\".concat(activeMode), hasActive && active && isPresetActiveMode), _defineProperty(_classNames, \"Tappable--focus-visible\", focusVisible), _classNames));\n  var handlers = {\n    onStart: callMultiple(onStart, props.onStart),\n    onMove: callMultiple(onMove, props.onMove),\n    onEnd: callMultiple(onEnd, props.onEnd),\n    onClick: onClick,\n    onKeyDown: callMultiple(onKeyDown, _onKeyDown)\n  };\n  var role = props.href ? \"link\" : \"button\";\n  return createScopedElement(Touch, _extends({\n    onEnter: callMultiple(setHoveredTrue, onEnter),\n    onLeave: callMultiple(setHoveredFalse, onLeave),\n    type: Component === \"button\" ? \"button\" : undefined,\n    tabIndex: isCustomElement && !props.disabled ? 0 : undefined,\n    role: isCustomElement ? role : undefined,\n    \"aria-disabled\": isCustomElement ? props.disabled : undefined,\n    stopPropagation: stopPropagation && !insideTouchRoot && !props.disabled\n  }, props, {\n    slideThreshold: 20,\n    usePointerHover: true,\n    vkuiClass: classes,\n    Component: Component,\n    getRootRef: containerRef,\n    onBlur: callMultiple(onBlur, props.onBlur),\n    onFocus: callMultiple(onFocus, props.onFocus)\n  }, props.disabled ? {} : handlers), createScopedElement(TappableContext.Provider, {\n    value: childContext\n  }, children), platform === ANDROID && !hasMouse && hasActive && activeMode === \"background\" && createScopedElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    vkuiClass: \"Tappable__waves\"\n  }, clicks.map(function (wave) {\n    return createScopedElement(Wave, _extends({}, wave, {\n      key: wave.id,\n      onClear: function onClear() {\n        return setClicks(clicks.filter(function (c) {\n          return c.id !== wave.id;\n        }));\n      }\n    }));\n  })), hasHover && hoverMode === \"background\" && createScopedElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    vkuiClass: \"Tappable__hoverShadow\"\n  }), !props.disabled && isPresetFocusVisibleMode && createScopedElement(FocusVisible, {\n    mode: focusVisibleMode\n  }));\n}; // eslint-disable-next-line import/no-default-export\n\n\nexport default withAdaptivity(Tappable, {\n  sizeX: true,\n  hasMouse: true,\n  deviceHasHover: true\n});\n\nfunction Wave(_ref5) {\n  var x = _ref5.x,\n      y = _ref5.y,\n      onClear = _ref5.onClear;\n  var timeout = useTimeout(onClear, 225);\n  React.useEffect(function () {\n    return timeout.set();\n  }, [timeout]);\n  return createScopedElement(\"span\", {\n    vkuiClass: \"Tappable__wave\",\n    style: {\n      top: y,\n      left: x\n    }\n  });\n}","map":{"version":3,"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,KAAT;AACA,OAAOC,gBAAP;AACA,SAASC,UAAT;AACA,SAASC,YAAT;AACA,SAASC,OAAT;AACA,SAASC,aAAT;AACA,SAASC,MAAT,EAAiBC,MAAjB;AAEA,SAASC,cAAT;AACA,SAASC,gCAAT;AACA,SAASC,yBAAT;AACA,SAASC,YAAT;AACA,SAASC,UAAT;AACA,SAASC,YAAT;AACA,SAASC,WAAT;AACA,SAASC,eAAT;AACA,SAASC,YAAT;AACA,SAASC,eAAT;AA0DA,OAAO,IAAMC,YAAY,GAAG,EAArB;AACP,OAAO,IAAMC,mBAAmB,GAAG,GAA5B;AAEP,IAAMC,SAAS,GAAGtB,IAAI,EAAtB;AACA,IAAMuB,QAAQ,GAAG;EAAEC,IAAI,EAAE,CAAR;EAAWC,OAAO,EAAE,CAApB;EAAuBC,MAAM,EAAE,CAA/B;EAAkCC,OAAO,EAAE;AAA3C,CAAjB;AAGA,IAAMC,eAAe,gBAAG7B,KAAK,CAAC8B,aAAN9B,CAA8C;EACpE+B,aAAa,EAAE7B;AADqD,CAA9CF,CAAxB;;AAIA,SAASgC,WAAT,CAAqBC,SAArB,EAAyCC,SAAzC,EAA4D;EAC1D,IAAMC,EAAE,GAAGnC,KAAK,CAACoC,OAANpC,CACT;IAAA,OAAMqC,IAAI,CAACC,KAALD,CAAWA,IAAI,CAACE,MAALF,KAAgB,GAA3BA,EAAgCG,QAAhCH,CAAyC,EAAzCA,CAAN;EADS,GAET,EAFSrC,CAAX;;EAKA,sBAAgCA,KAAK,CAACyC,QAANzC,CAE9BwB,QAAQ,CAACC,IAFqBzB,CAAhC;EAAA;EAAA,IAAO0C,QAAP;EAAA,IAAiBC,WAAjB;;EAGA,IAAMC,KAAK,GAAG,SAARA,KAAQ;IAAA,OAAMD,WAAW,CAACnB,QAAQ,CAACC,IAAV,CAAjB;EAAd;;EACA,IAAMoB,KAAK,GAAG,SAARA,KAAQ;IAAA,OAAMZ,SAAS,IAAIU,WAAW,CAACnB,QAAQ,CAACG,MAAV,CAA9B;EAAd;;EACA,IAAMmB,UAAU,GAAG,SAAbA,UAAa,GAAM;IACvBb,SAAS,IAAIU,WAAW,CAACnB,QAAQ,CAACE,OAAV,CAAxBO;EADF;;EAIA,IAAMc,aAAa,GAAGhC,UAAU,CAAC8B,KAAD,EAAQxB,YAAR,CAAhC;EACA,IAAM2B,WAAW,GAAGjC,UAAU,CAAC6B,KAAD,EAAQV,SAAR,CAA9B;EAEArB,yBAAyB,CAAC,YAAM;IAC9B,IAAI6B,QAAQ,KAAKlB,QAAQ,CAACE,OAA1B,EAAmC;MACjCqB,aAAa,CAACE,GAAdF;MACA,OAAOA,aAAa,CAACG,KAArB;IACD;;IACD,IAAIR,QAAQ,KAAKlB,QAAQ,CAACI,OAA1B,EAAmC;MACjC,OAAOoB,WAAW,CAACE,KAAnB;IACD;;IACD,IAAIR,QAAQ,KAAKlB,QAAQ,CAACG,MAA1B,EAAkC;MAChCJ,SAAS,CAAC4B,IAAV5B,CAAe,QAAfA,EAAyBY,EAAzBZ;IACD;;IACD,OAAOrB,IAAP;EAXuB,GAYtB,CAACwC,QAAD,CAZsB,CAAzB7B;EAcAA,yBAAyB,CAAC,YAAM;IAC9B,IAAI6B,QAAQ,KAAKlB,QAAQ,CAACC,IAA1B,EAAgC;MAC9B,OAAOvB,IAAP;IACD;;IACD,IAAMkD,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAAsB;MAC3CA,QAAQ,KAAKlB,EAAbkB,IAAmBT,KAAK,EAAxBS;IADF;;IAGA9B,SAAS,CAAC+B,EAAV/B,CAAa,QAAbA,EAAuB6B,cAAvB7B;IACA,OAAO;MAAA,OAAMA,SAAS,CAACgC,GAAVhC,CAAc,QAAdA,EAAwB6B,cAAxB7B,CAAN;IAAP;EARuB,GAStB,CAACmB,QAAQ,KAAKlB,QAAQ,CAACC,IAAvB,CATsB,CAAzBZ;EAWAA,yBAAyB,CAAC,YAAM;IAC9B,CAACoB,SAAD,IAAcW,KAAK,EAAnB;EADuB,GAEtB,CAACX,SAAD,CAFsB,CAAzBpB;;EAIA,IAAM2C,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAoB;IAC/B,IAAIA,KAAJ,EAAW;MACTd,WAAW,CAACnB,QAAQ,CAACI,OAAV,CAAXe;MACA,OAAOK,WAAW,CAACC,GAAZD,CAAgBS,KAAhBT,CAAP;IACD;;IACDJ,KAAK;EALP;;EAQA,OAAO,CAACF,QAAD,EAAW;IAAEI,UAAU,EAAVA,UAAF;IAAcD,KAAK,EAALA,KAAd;IAAqBW,IAAI,EAAJA;EAArB,CAAX,CAAP;AACD;;AAED,IAAME,QAAiC,GAAG,SAApCA,QAAoC,OAmBrB;EAAA;;EAAA,IAlBnBC,QAkBmB,QAlBnBA,QAkBmB;EAAA,IAjBnBC,SAiBmB,QAjBnBA,SAiBmB;EAAA,IAhBnBC,OAgBmB,QAhBnBA,OAgBmB;EAAA,IAfRC,UAeQ,QAfnBC,SAemB;EAAA,iCAdnBC,iBAcmB;EAAA,IAdnBA,iBAcmB,sCAdC1C,mBAcD;EAAA,gCAbnB2C,eAamB;EAAA,IAbnBA,eAamB,qCAbD,KAaC;EAAA,IAZnBC,UAYmB,QAZnBA,UAYmB;EAAA,IAXnBC,KAWmB,QAXnBA,KAWmB;EAAA,IAVnBC,QAUmB,QAVnBA,QAUmB;EAAA,IATnBC,cASmB,QATnBA,cASmB;EAAA,yBARnBC,QAQmB;EAAA,IARTC,SAQS,8BARG,IAQH;EAAA,0BAPnBC,SAOmB;EAAA,IAPnBA,SAOmB,+BAPP,YAOO;EAAA,0BANnBvC,SAMmB;EAAA,IANRwC,UAMQ,+BANK,IAML;EAAA,2BALnBC,UAKmB;EAAA,IALnBA,UAKmB,gCALN,YAKM;EAAA,iCAJnBC,gBAImB;EAAA,IAJnBA,gBAImB,sCAJA,QAIA;EAAA,IAHnBC,OAGmB,QAHnBA,OAGmB;EAAA,IAFnBC,OAEmB,QAFnBA,OAEmB;EAAA,IADhBC,KACgB;;EACnBlB,SAAS,GAAGA,SAAS,KAAMkB,KAAK,CAACC,IAAND,GAAa,GAAbA,GAAmB,KAAzB,CAArBlB;;EAEA,wBAA0B5D,KAAK,CAACgF,UAANhF,CAAiB6B,eAAjB7B,CAA1B;EAAA,IAAQ+B,aAAR,qBAAQA,aAAR;;EACA,IAAMkD,eAAe,GAAGjF,KAAK,CAACgF,UAANhF,CAAiBI,gBAAjBJ,CAAxB;EACA,IAAMkF,QAAQ,GAAGjE,WAAW,EAA5B;;EACA,uBAA0CC,eAAe,EAAzD;EAAA,IAAQiE,YAAR,oBAAQA,YAAR;EAAA,IAAsBC,MAAtB,oBAAsBA,MAAtB;EAAA,IAA8BC,OAA9B,oBAA8BA,OAA9B;;EAEA,uBAA4BrF,KAAK,CAACyC,QAANzC,CAAuB,EAAvBA,CAA5B;EAAA;EAAA,IAAOsF,MAAP;EAAA,IAAeC,SAAf;;EACA,uBAAoCvF,KAAK,CAACyC,QAANzC,CAAe,KAAfA,CAApC;EAAA;EAAA,IAAOwF,UAAP;EAAA,IAAmBC,aAAnB;;EACA,uBAIIrE,eAAe,CAAC,KAAD,CAJnB;EAAA,IACSsE,QADT,oBACEC,KADF;EAAA,IAEWC,cAFX,oBAEEC,OAFF;EAAA,IAGYC,eAHZ,oBAGEC,QAHF;;EAMA,IAAMC,OAAO,GAAGN,QAAQ,IAAI,CAACZ,KAAK,CAACmB,QAAnC;EACA,IAAMhE,SAAS,GAAGwC,UAAU,IAAI,CAACe,UAAff,IAA6B,CAACK,KAAK,CAACmB,QAAtD;EACA,IAAM3B,QAAQ,GAAGD,cAAc,IAAIE,SAAlBF,IAA+B,CAACmB,UAAjD;EACA,IAAMU,eAAe,GACnBtC,SAAS,KAAK,GAAdA,IAAqBA,SAAS,KAAK,QAAnCA,IAA+C,CAACkB,KAAK,CAACqB,eADxD;EAEA,IAAMC,iBAAiB,GAAG,CAAC,SAAD,EAAY,YAAZ,EAA0BC,QAA1B,CAAmC7B,SAAnC,CAA1B;EACA,IAAM8B,kBAAkB,GAAG,CAAC,SAAD,EAAY,YAAZ,EAA0BD,QAA1B,CAAmC3B,UAAnC,CAA3B;EACA,IAAM6B,wBAAwB,GAAG,CAAC,QAAD,EAAW,SAAX,EAAsBF,QAAtB,CAC/B1B,gBAD+B,CAAjC;;EAIA,mBAAgD3C,WAAW,CACzDC,SADyD,EAEzD+B,iBAFyD,CAA3D;EAAA;EAAA,IAAOtB,QAAP;EAAA;EAAA,IAAmBG,KAAnB,kBAAmBA,KAAnB;EAAA,IAA0BW,IAA1B,kBAA0BA,IAA1B;EAAA,IAAgCV,UAAhC,kBAAgCA,UAAhC;;EAIA,IAAMnB,MAAM,GAAGe,QAAQ,KAAKlB,QAAQ,CAACG,MAAtBe,IAAgCA,QAAQ,KAAKlB,QAAQ,CAACI,OAArE;EAEA,IAAM4E,YAAY,GAAGxF,YAAY,CAACkD,UAAD,CAAjC,CAjCmB,CAmCnB;;EACA,IAAMuC,YAAY,GAAGzG,KAAK,CAAC0G,MAAN1G,CAAa;IAAE+B,aAAa,EAAE0D;EAAjB,CAAbzF,EAA+C2G,OAApE;EACA9F,yBAAyB,CAAC,YAAM;IAC9B,IAAI,CAACmF,OAAL,EAAc;MACZ,OAAO9F,IAAP;IACD;;IACD6B,aAAa,CAAC,IAAD,CAAbA;IACA,OAAO;MAAA,OAAMA,aAAa,CAAC,KAAD,CAAnB;IAAP;EALuB,GAMtB,CAACiE,OAAD,CANsB,CAAzBnF;EAQA;AACF;AACA;AACA;AACA;AACA;AACA;;EACE,SAASkD,SAAT,CAAmB6C,CAAnB,EAAwD;IACtD,IAAIV,eAAe,IAAItF,gCAAgC,CAACgG,CAAD,CAAvD,EAA4D;MAAA;;MAC1DA,CAAC,CAACC,cAAFD;MACA,qCAAY,CAACD,OAAb,gFAAsBG,KAAtB;IACD;EACF;;EAED,SAASC,OAAT,QAAgD;IAAA,IAA7BC,aAA6B,SAA7BA,aAA6B;;IAC9C,IAAI/E,SAAJ,EAAe;MACb,IAAI+E,aAAa,CAACC,OAAdD,IAAyBA,aAAa,CAACC,OAAdD,CAAsBE,MAAtBF,GAA+B,CAA5D,EAA+D;QAC7D;QACA,OAAOxD,IAAI,EAAX;MACD;;MAED,IAAI0B,QAAQ,KAAK3E,OAAjB,EAA0B;QACxB,qBAAsBC,aAAa,CAACgG,YAAY,CAACG,OAAd,CAAnC;QAAA,IAAQQ,GAAR,kBAAQA,GAAR;QAAA,IAAaC,IAAb,kBAAaA,IAAb;;QACA,IAAMC,CAAC,GAAG5G,MAAM,CAACuG,aAAD,CAANvG,IAAyB2G,IAAzB,SAAyBA,QAAzB,WAAyBA,UAAQ,CAAjC3G,CAAV;QACA,IAAM6G,CAAC,GAAG5G,MAAM,CAACsG,aAAD,CAANtG,IAAyByG,GAAzB,SAAyBA,OAAzB,WAAyBA,SAAO,CAAhCzG,CAAV;QACA6E,SAAS,8BAAKD,MAAL,IAAa;UAAE+B,CAAC,EAADA,CAAF;UAAKC,CAAC,EAADA,CAAL;UAAQnF,EAAE,EAAEoF,IAAI,CAACC,GAALD,GAAW/E,QAAX+E;QAAZ,CAAb,GAAThC;MACD;;MAEDzC,UAAU;IACX;EACF;;EAED,SAAS2E,MAAT,QAAyC;IAAA,IAAvBC,OAAuB,SAAvBA,OAAuB;;IACvC,IAAIA,OAAJ,EAAa;MACXlE,IAAI;IACL;EACF;;EAED,SAASmE,KAAT,QAAyC;IAAA,IAAxBC,QAAwB,SAAxBA,QAAwB;;IACvC,IAAIlF,QAAQ,KAAKlB,QAAQ,CAACC,IAA1B,EAAgC;MAC9B;IACD;;IACD,IAAIiB,QAAQ,KAAKlB,QAAQ,CAACE,OAA1B,EAAmC;MACjC;MACAmB,KAAK;IANgC,EASvC;;;IACA,IAAMgF,aAAa,GAAGD,QAAQ,GAAGvG,YAAjC;IACAmC,IAAI,CAACqE,aAAa,IAAI,GAAjBA,GAAuB,CAAvBA,GAA2B7D,iBAAiB,GAAG6D,aAAhD,CAAJrE;EACD;;EAED,IAAMsE,OAAO,GAAGzH,UAAU,CACxBC,YAAY,CAAC,UAAD,EAAa4E,QAAb,CADY,4BAELf,KAFK,GAGxBG,QAAQ,IAAI0B,OAAZ1B,IAAuB,CAAC8B,iBAAxB9B,IAA6CE,SAHrB,EAIxBvC,SAAS,IAAIN,MAAbM,IAAuB,CAACqE,kBAAxBrE,IAA8CyC,UAJtB,EAKxBS,YAAY,IAAI,CAACoB,wBAAjBpB,IAA6CR,gBALrB;IAOtB,oBAAoB1C,SAAS,IAAIN,MAPX;IAQtB,mBAAmByC;EARG,0DASFI,SATE,GAUpBF,QAAQ,IAAI0B,OAAZ1B,IAAuB8B,iBAVH,2DAWD1B,UAXC,GAYpBzC,SAAS,IAAIN,MAAbM,IAAuBqE,kBAZH,gCAatB,yBAbsB,EAaKnB,YAbL,gBAA1B;EAiBA,IAAM4C,QAA4B,GAAG;IACnChB,OAAO,EAAE5F,YAAY,CAAC4F,OAAD,EAAUjC,KAAK,CAACiC,OAAhB,CADc;IAEnCU,MAAM,EAAEtG,YAAY,CAACsG,MAAD,EAAS3C,KAAK,CAAC2C,MAAf,CAFe;IAGnCE,KAAK,EAAExG,YAAY,CAACwG,KAAD,EAAQ7C,KAAK,CAAC6C,KAAd,CAHgB;IAInC9D,OAAO,EAAPA,OAJmC;IAKnCE,SAAS,EAAE5C,YAAY,CAAC4C,SAAD,EAAYD,UAAZ;EALY,CAArC;EAOA,IAAMkE,IAAI,GAAGlD,KAAK,CAACC,IAAND,GAAa,MAAbA,GAAsB,QAAnC;EAEA,OACEmD,oBAAC9H,KAAD;IACEyE,OAAO,EAAEzD,YAAY,CAACyE,cAAD,EAAiBhB,OAAjB,CADvB;IAEEC,OAAO,EAAE1D,YAAY,CAAC2E,eAAD,EAAkBjB,OAAlB,CAFvB;IAGEqD,IAAI,EAAEtE,SAAS,KAAK,QAAdA,GAAyB,QAAzBA,GAAoCuE,SAH5C;IAIEC,QAAQ,EAAElC,eAAe,IAAI,CAACpB,KAAK,CAACmB,QAA1BC,GAAqC,CAArCA,GAAyCiC,SAJrD;IAKEH,IAAI,EAAE9B,eAAe,GAAG8B,IAAH,GAAUG,SALjC;IAME,iBAAejC,eAAe,GAAGpB,KAAK,CAACmB,QAAT,GAAoBkC,SANpD;IAOElE,eAAe,EAAEA,eAAe,IAAI,CAACgB,eAApBhB,IAAuC,CAACa,KAAK,CAACmB;EAPjE,GAQMnB,KARN;IASEuD,cAAc,EAAE,EATlB;IAUEC,eAAe,MAVjB;IAWEC,SAAS,EAAET,OAXb;IAYElE,SAAS,EAAEA,SAZb;IAaEM,UAAU,EAAEsC,YAbd;IAcEpB,MAAM,EAAEjE,YAAY,CAACiE,MAAD,EAASN,KAAK,CAACM,MAAf,CAdtB;IAeEC,OAAO,EAAElE,YAAY,CAACkE,OAAD,EAAUP,KAAK,CAACO,OAAhB;EAfvB,GAgBOP,KAAK,CAACmB,QAANnB,GAAiB,EAAjBA,GAAsBiD,QAhB7B,GAkBEE,oBAACpG,eAAD,CAAiB2G,QAAjB;IAA0B7C,KAAK,EAAEc;EAAjC,GACG9C,QADH,CAlBF,EAqBGuB,QAAQ,KAAK3E,OAAb2E,IACC,CAACd,QADFc,IAECjD,SAFDiD,IAGCR,UAAU,KAAK,YAHhBQ,IAIG+C;IAAM,eAAY,MAAlB;IAAyBM,SAAS,EAAC;EAAnC,GACGjD,MAAM,CAACmD,GAAPnD,CAAW,UAACoD,IAAD;IAAA,OACVT,oBAACU,IAAD,eACMD,IADN;MAEEE,GAAG,EAAEF,IAAI,CAACvG,EAFZ;MAGE0G,OAAO,EAAE;QAAA,OACPtD,SAAS,CAACD,MAAM,CAACwD,MAAPxD,CAAc,UAACyD,CAAD;UAAA,OAAOA,CAAC,CAAC5G,EAAF4G,KAASL,IAAI,CAACvG,EAArB;QAAd,EAAD,CADF;MAAA;IAHX,GADU;EAAX,EADH,CAzBN,EAqCGmC,QAAQ,IAAIE,SAAS,KAAK,YAA1BF,IACC2D;IAAM,eAAY,MAAlB;IAAyBM,SAAS,EAAC;EAAnC,EAtCJ,EAwCG,CAACzD,KAAK,CAACmB,QAAP,IAAmBM,wBAAnB,IACC0B,oBAACnH,YAAD;IAAckI,IAAI,EAAErE;EAApB,EAzCJ,CADF;AA9IF,E,CA8LA;;;AACA,eAAehE,cAAc,CAAC+C,QAAD,EAAW;EACtCS,KAAK,EAAE,IAD+B;EAEtCC,QAAQ,EAAE,IAF4B;EAGtCC,cAAc,EAAE;AAHsB,CAAX,CAA7B;;AAMA,SAASsE,IAAT,QAAmE;EAAA,IAAnDtB,CAAmD,SAAnDA,CAAmD;EAAA,IAAhDC,CAAgD,SAAhDA,CAAgD;EAAA,IAA7CuB,OAA6C,SAA7CA,OAA6C;EACjE,IAAMI,OAAO,GAAGlI,UAAU,CAAC8H,OAAD,EAAU,GAAV,CAA1B;EACA7I,KAAK,CAACkJ,SAANlJ,CAAgB;IAAA,OAAMiJ,OAAO,CAAChG,GAARgG,EAAN;EAAhB,GAAqC,CAACA,OAAD,CAArCjJ;EACA,OAAOiI;IAAMM,SAAS,EAAC,gBAAhB;IAAiCY,KAAK,EAAE;MAAEhC,GAAG,EAAEG,CAAP;MAAUF,IAAI,EAAEC;IAAhB;EAAxC,EAAP;AACD","names":["React","mitt","noop","Touch","TouchRootContext","classNames","getClassName","ANDROID","getOffsetRect","coordX","coordY","withAdaptivity","shouldTriggerClickOnEnterOrSpace","useIsomorphicLayoutEffect","FocusVisible","useTimeout","useExternRef","usePlatform","useFocusVisible","callMultiple","useBooleanState","ACTIVE_DELAY","ACTIVE_EFFECT_DELAY","activeBus","TapState","none","pending","active","exiting","TappableContext","createContext","onHoverChange","useActivity","hasActive","stopDelay","id","useMemo","Math","round","random","toString","useState","activity","setActivity","_stop","start","delayStart","activeTimeout","stopTimeout","set","clear","emit","onActiveChange","activeId","on","off","stop","delay","Tappable","children","Component","onClick","_onKeyDown","onKeyDown","activeEffectDelay","stopPropagation","getRootRef","sizeX","hasMouse","deviceHasHover","hasHover","_hasHover","hoverMode","_hasActive","activeMode","focusVisibleMode","onEnter","onLeave","props","href","useContext","insideTouchRoot","platform","focusVisible","onBlur","onFocus","clicks","setClicks","childHover","setChildHover","_hovered","value","setHoveredTrue","setTrue","setHoveredFalse","setFalse","hovered","disabled","isCustomElement","contentEditable","isPresetHoverMode","includes","isPresetActiveMode","isPresetFocusVisibleMode","containerRef","childContext","useRef","current","e","preventDefault","click","onStart","originalEvent","touches","length","top","left","x","y","Date","now","onMove","isSlide","onEnd","duration","activeDuraion","classes","handlers","role","createScopedElement","type","undefined","tabIndex","slideThreshold","usePointerHover","vkuiClass","Provider","map","wave","Wave","key","onClear","filter","c","mode","timeout","useEffect","style"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/Tappable/Tappable.tsx"],"sourcesContent":["import * as React from \"react\";\nimport mitt from \"mitt\";\nimport { noop } from \"@vkontakte/vkjs\";\nimport { Touch, TouchEvent, TouchProps } from \"../Touch/Touch\";\nimport TouchRootContext from \"../Touch/TouchContext\";\nimport { classNames } from \"../../lib/classNames\";\nimport { getClassName } from \"../../helpers/getClassName\";\nimport { ANDROID } from \"../../lib/platform\";\nimport { getOffsetRect } from \"../../lib/offset\";\nimport { coordX, coordY } from \"../../lib/touch\";\nimport { HasComponent, HasRootRef } from \"../../types\";\nimport { withAdaptivity, AdaptivityProps } from \"../../hoc/withAdaptivity\";\nimport { shouldTriggerClickOnEnterOrSpace } from \"../../lib/accessibility\";\nimport { useIsomorphicLayoutEffect } from \"../../lib/useIsomorphicLayoutEffect\";\nimport { FocusVisible, FocusVisibleMode } from \"../FocusVisible/FocusVisible\";\nimport { useTimeout } from \"../../hooks/useTimeout\";\nimport { useExternRef } from \"../../hooks/useExternRef\";\nimport { usePlatform } from \"../../hooks/usePlatform\";\nimport { useFocusVisible } from \"../../hooks/useFocusVisible\";\nimport { callMultiple } from \"../../lib/callMultiple\";\nimport { useBooleanState } from \"../../hooks/useBooleanState\";\nimport \"./Tappable.css\";\n\nexport interface TappableProps\n  extends Omit<\n      React.AllHTMLAttributes<HTMLElement>,\n      | \"onTouchStart\"\n      | \"onTouchMove\"\n      | \"onTouchEnd\"\n      | \"onTouchCancel\"\n      | \"onMouseDown\"\n      | \"onMouseMove\"\n      | \"onMouseUp\"\n      | \"onMouseLeave\"\n    >,\n    HasRootRef<HTMLElement>,\n    AdaptivityProps,\n    HasComponent,\n    Pick<TouchProps, \"onStart\" | \"onEnd\" | \"onMove\"> {\n  /**\n   * Длительность показа active-состояния\n   */\n  activeEffectDelay?: number;\n  stopPropagation?: boolean;\n  /**\n   * Указывает, должен ли компонент реагировать на hover-состояние\n   */\n  hasHover?: boolean;\n  /**\n   * Указывает, должен ли компонент реагировать на active-состояние\n   */\n  hasActive?: boolean;\n  /**\n   * Стиль подсветки active-состояния. Если передать произвольную строку, она добавится как css-класс во время active\n   */\n  activeMode?: \"opacity\" | \"background\" | string;\n  /**\n   * Стиль подсветки hover-состояния. Если передать произвольную строку, она добавится как css-класс во время hover\n   */\n  hoverMode?: \"opacity\" | \"background\" | string;\n  /**\n   * Стиль аутлайна focus visible. Если передать произвольную строку, она добавится как css-класс во время focus-visible\n   */\n  focusVisibleMode?: FocusVisibleMode | string;\n  onEnter?: (outputEvent: MouseEvent) => void;\n  onLeave?: (outputEvent: MouseEvent) => void;\n}\n\ninterface Wave {\n  x: number;\n  y: number;\n  id: string;\n}\n\nexport interface RootComponentProps extends TouchProps {\n  ref?: React.Ref<HTMLElement>;\n}\n\nexport const ACTIVE_DELAY = 70;\nexport const ACTIVE_EFFECT_DELAY = 600;\n\nconst activeBus = mitt<{ active: string }>();\nconst TapState = { none: 0, pending: 1, active: 2, exiting: 3 } as const;\n\ntype TappableContextInterface = { onHoverChange: (s: boolean) => void };\nconst TappableContext = React.createContext<TappableContextInterface>({\n  onHoverChange: noop,\n});\n\nfunction useActivity(hasActive: boolean, stopDelay: number) {\n  const id = React.useMemo(\n    () => Math.round(Math.random() * 1e8).toString(16),\n    []\n  );\n\n  const [activity, setActivity] = React.useState<\n    typeof TapState[keyof typeof TapState]\n  >(TapState.none);\n  const _stop = () => setActivity(TapState.none);\n  const start = () => hasActive && setActivity(TapState.active);\n  const delayStart = () => {\n    hasActive && setActivity(TapState.pending);\n  };\n\n  const activeTimeout = useTimeout(start, ACTIVE_DELAY);\n  const stopTimeout = useTimeout(_stop, stopDelay);\n\n  useIsomorphicLayoutEffect(() => {\n    if (activity === TapState.pending) {\n      activeTimeout.set();\n      return activeTimeout.clear;\n    }\n    if (activity === TapState.exiting) {\n      return stopTimeout.clear;\n    }\n    if (activity === TapState.active) {\n      activeBus.emit(\"active\", id);\n    }\n    return noop;\n  }, [activity]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (activity === TapState.none) {\n      return noop;\n    }\n    const onActiveChange = (activeId: string) => {\n      activeId !== id && _stop();\n    };\n    activeBus.on(\"active\", onActiveChange);\n    return () => activeBus.off(\"active\", onActiveChange);\n  }, [activity === TapState.none]);\n\n  useIsomorphicLayoutEffect(() => {\n    !hasActive && _stop();\n  }, [hasActive]);\n\n  const stop = (delay?: number) => {\n    if (delay) {\n      setActivity(TapState.exiting);\n      return stopTimeout.set(delay);\n    }\n    _stop();\n  };\n\n  return [activity, { delayStart, start, stop }] as const;\n}\n\nconst Tappable: React.FC<TappableProps> = ({\n  children,\n  Component,\n  onClick,\n  onKeyDown: _onKeyDown,\n  activeEffectDelay = ACTIVE_EFFECT_DELAY,\n  stopPropagation = false,\n  getRootRef,\n  sizeX,\n  hasMouse,\n  deviceHasHover,\n  hasHover: _hasHover = true,\n  hoverMode = \"background\",\n  hasActive: _hasActive = true,\n  activeMode = \"background\",\n  focusVisibleMode = \"inside\",\n  onEnter,\n  onLeave,\n  ...props\n}: TappableProps) => {\n  Component = Component || ((props.href ? \"a\" : \"div\") as React.ElementType);\n\n  const { onHoverChange } = React.useContext(TappableContext);\n  const insideTouchRoot = React.useContext(TouchRootContext);\n  const platform = usePlatform();\n  const { focusVisible, onBlur, onFocus } = useFocusVisible();\n\n  const [clicks, setClicks] = React.useState<Wave[]>([]);\n  const [childHover, setChildHover] = React.useState(false);\n  const {\n    value: _hovered,\n    setTrue: setHoveredTrue,\n    setFalse: setHoveredFalse,\n  } = useBooleanState(false);\n\n  const hovered = _hovered && !props.disabled;\n  const hasActive = _hasActive && !childHover && !props.disabled;\n  const hasHover = deviceHasHover && _hasHover && !childHover;\n  const isCustomElement =\n    Component !== \"a\" && Component !== \"button\" && !props.contentEditable;\n  const isPresetHoverMode = [\"opacity\", \"background\"].includes(hoverMode);\n  const isPresetActiveMode = [\"opacity\", \"background\"].includes(activeMode);\n  const isPresetFocusVisibleMode = [\"inside\", \"outside\"].includes(\n    focusVisibleMode\n  );\n\n  const [activity, { start, stop, delayStart }] = useActivity(\n    hasActive,\n    activeEffectDelay\n  );\n  const active = activity === TapState.active || activity === TapState.exiting;\n\n  const containerRef = useExternRef(getRootRef);\n\n  // hover propagation\n  const childContext = React.useRef({ onHoverChange: setChildHover }).current;\n  useIsomorphicLayoutEffect(() => {\n    if (!hovered) {\n      return noop;\n    }\n    onHoverChange(true);\n    return () => onHoverChange(false);\n  }, [hovered]);\n\n  /*\n   * [a11y]\n   * Обрабатывает событие onkeydown\n   * для кастомных доступных элементов:\n   * - role=\"link\" (активация по Enter)\n   * - role=\"button\" (активация по Space и Enter)\n   */\n  function onKeyDown(e: React.KeyboardEvent<HTMLElement>) {\n    if (isCustomElement && shouldTriggerClickOnEnterOrSpace(e)) {\n      e.preventDefault();\n      containerRef.current?.click();\n    }\n  }\n\n  function onStart({ originalEvent }: TouchEvent) {\n    if (hasActive) {\n      if (originalEvent.touches && originalEvent.touches.length > 1) {\n        // r сожалению я так и не понял, что это делает и можно ли упихнуть его в Touch\n        return stop();\n      }\n\n      if (platform === ANDROID) {\n        const { top, left } = getOffsetRect(containerRef.current);\n        const x = coordX(originalEvent) - (left ?? 0);\n        const y = coordY(originalEvent) - (top ?? 0);\n        setClicks([...clicks, { x, y, id: Date.now().toString() }]);\n      }\n\n      delayStart();\n    }\n  }\n\n  function onMove({ isSlide }: TouchEvent) {\n    if (isSlide) {\n      stop();\n    }\n  }\n\n  function onEnd({ duration }: TouchEvent) {\n    if (activity === TapState.none) {\n      return;\n    }\n    if (activity === TapState.pending) {\n      // активировать при коротком тапе\n      start();\n    }\n\n    // отключить без задержки при длинном тапе\n    const activeDuraion = duration - ACTIVE_DELAY;\n    stop(activeDuraion >= 100 ? 0 : activeEffectDelay - activeDuraion);\n  }\n\n  const classes = classNames(\n    getClassName(\"Tappable\", platform),\n    `Tappable--sizeX-${sizeX}`,\n    hasHover && hovered && !isPresetHoverMode && hoverMode,\n    hasActive && active && !isPresetActiveMode && activeMode,\n    focusVisible && !isPresetFocusVisibleMode && focusVisibleMode,\n    {\n      \"Tappable--active\": hasActive && active,\n      \"Tappable--mouse\": hasMouse,\n      [`Tappable--hover-${hoverMode}`]:\n        hasHover && hovered && isPresetHoverMode,\n      [`Tappable--active-${activeMode}`]:\n        hasActive && active && isPresetActiveMode,\n      \"Tappable--focus-visible\": focusVisible,\n    }\n  );\n\n  const handlers: RootComponentProps = {\n    onStart: callMultiple(onStart, props.onStart),\n    onMove: callMultiple(onMove, props.onMove),\n    onEnd: callMultiple(onEnd, props.onEnd),\n    onClick,\n    onKeyDown: callMultiple(onKeyDown, _onKeyDown),\n  };\n  const role = props.href ? \"link\" : \"button\";\n\n  return (\n    <Touch\n      onEnter={callMultiple(setHoveredTrue, onEnter)}\n      onLeave={callMultiple(setHoveredFalse, onLeave)}\n      type={Component === \"button\" ? \"button\" : undefined}\n      tabIndex={isCustomElement && !props.disabled ? 0 : undefined}\n      role={isCustomElement ? role : undefined}\n      aria-disabled={isCustomElement ? props.disabled : undefined}\n      stopPropagation={stopPropagation && !insideTouchRoot && !props.disabled}\n      {...props}\n      slideThreshold={20}\n      usePointerHover\n      vkuiClass={classes}\n      Component={Component}\n      getRootRef={containerRef}\n      onBlur={callMultiple(onBlur, props.onBlur)}\n      onFocus={callMultiple(onFocus, props.onFocus)}\n      {...(props.disabled ? {} : handlers)}\n    >\n      <TappableContext.Provider value={childContext}>\n        {children}\n      </TappableContext.Provider>\n      {platform === ANDROID &&\n        !hasMouse &&\n        hasActive &&\n        activeMode === \"background\" && (\n          <span aria-hidden=\"true\" vkuiClass=\"Tappable__waves\">\n            {clicks.map((wave) => (\n              <Wave\n                {...wave}\n                key={wave.id}\n                onClear={() =>\n                  setClicks(clicks.filter((c) => c.id !== wave.id))\n                }\n              />\n            ))}\n          </span>\n        )}\n      {hasHover && hoverMode === \"background\" && (\n        <span aria-hidden=\"true\" vkuiClass=\"Tappable__hoverShadow\" />\n      )}\n      {!props.disabled && isPresetFocusVisibleMode && (\n        <FocusVisible mode={focusVisibleMode as FocusVisibleMode} />\n      )}\n    </Touch>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default withAdaptivity(Tappable, {\n  sizeX: true,\n  hasMouse: true,\n  deviceHasHover: true,\n});\n\nfunction Wave({ x, y, onClear }: Wave & { onClear: VoidFunction }) {\n  const timeout = useTimeout(onClear, 225);\n  React.useEffect(() => timeout.set(), [timeout]);\n  return <span vkuiClass=\"Tappable__wave\" style={{ top: y, left: x }} />;\n}\n"]},"metadata":{},"sourceType":"module"}