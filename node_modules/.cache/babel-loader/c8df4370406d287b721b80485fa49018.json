{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from \"react\";\nimport { subMonths, addMonths, isSameDay, isBefore, endOfDay, isAfter, startOfDay } from \"date-fns\";\nexport function useCalendar(_ref) {\n  var _ref2;\n\n  var value = _ref.value,\n      disablePast = _ref.disablePast,\n      disableFuture = _ref.disableFuture,\n      shouldDisableDate = _ref.shouldDisableDate;\n\n  var _React$useState = React.useState((_ref2 = Array.isArray(value) ? value[0] : value) !== null && _ref2 !== void 0 ? _ref2 : new Date()),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      viewDate = _React$useState2[0],\n      setViewDate = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      focusedDay = _React$useState4[0],\n      setFocusedDay = _React$useState4[1];\n\n  var setPrevMonth = React.useCallback(function () {\n    return setViewDate(subMonths(viewDate, 1));\n  }, [viewDate]);\n  var setNextMonth = React.useCallback(function () {\n    return setViewDate(addMonths(viewDate, 1));\n  }, [viewDate]);\n  var isDayFocused = React.useCallback(function (day) {\n    return Boolean(focusedDay && isSameDay(day, focusedDay));\n  }, [focusedDay]);\n  var isDayDisabled = React.useCallback(function (day) {\n    var now = new Date();\n    var disabled = false;\n\n    if (disablePast) {\n      disabled = isBefore(endOfDay(day), now);\n    }\n\n    if (disableFuture) {\n      disabled = isAfter(startOfDay(day), now);\n    }\n\n    if (shouldDisableDate) {\n      disabled = shouldDisableDate(day);\n    }\n\n    return disabled;\n  }, [disableFuture, disablePast, shouldDisableDate]);\n  var resetSelectedDay = React.useCallback(function () {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n  return {\n    viewDate: viewDate,\n    setViewDate: setViewDate,\n    setPrevMonth: setPrevMonth,\n    setNextMonth: setNextMonth,\n    focusedDay: focusedDay,\n    setFocusedDay: setFocusedDay,\n    isDayFocused: isDayFocused,\n    isDayDisabled: isDayDisabled,\n    resetSelectedDay: resetSelectedDay\n  };\n}","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SACEC,SADF,EAEEC,SAFF,EAGEC,SAHF,EAIEC,QAJF,EAKEC,QALF,EAMEC,OANF,EAOEC,UAPF,QAQO,UARP;AAiBA,OAAO,SAASC,WAAT,OAKqB;EAAA;;EAAA,IAJ1BC,KAI0B,QAJ1BA,KAI0B;EAAA,IAH1BC,WAG0B,QAH1BA,WAG0B;EAAA,IAF1BC,aAE0B,QAF1BA,aAE0B;EAAA,IAD1BC,iBAC0B,QAD1BA,iBAC0B;;EAC1B,sBAAgCZ,KAAK,CAACa,QAANb,UAC7Bc,KAAK,CAACC,OAAND,CAAcL,KAAdK,IAAuBL,KAAK,CAAC,CAAD,CAA5BK,GAAkCL,KADL,yCACe,IAAIO,IAAJ,EADfhB,CAAhC;EAAA;EAAA,IAAOiB,QAAP;EAAA,IAAiBC,WAAjB;;EAGA,uBAAoClB,KAAK,CAACa,QAANb,EAApC;EAAA;EAAA,IAAOmB,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,YAAY,GAAGrB,KAAK,CAACsB,WAANtB,CACnB;IAAA,OAAMkB,WAAW,CAACjB,SAAS,CAACgB,QAAD,EAAW,CAAX,CAAV,CAAjB;EADmB,GAEnB,CAACA,QAAD,CAFmBjB,CAArB;EAIA,IAAMuB,YAAY,GAAGvB,KAAK,CAACsB,WAANtB,CACnB;IAAA,OAAMkB,WAAW,CAAChB,SAAS,CAACe,QAAD,EAAW,CAAX,CAAV,CAAjB;EADmB,GAEnB,CAACA,QAAD,CAFmBjB,CAArB;EAKA,IAAMwB,YAAY,GAAGxB,KAAK,CAACsB,WAANtB,CACnB,UAACyB,GAAD;IAAA,OAAeC,OAAO,CAACP,UAAU,IAAIhB,SAAS,CAACsB,GAAD,EAAMN,UAAN,CAAxB,CAAtB;EADmB,GAEnB,CAACA,UAAD,CAFmBnB,CAArB;EAKA,IAAM2B,aAAa,GAAG3B,KAAK,CAACsB,WAANtB,CACpB,UAACyB,GAAD,EAAe;IACb,IAAMG,GAAG,GAAG,IAAIZ,IAAJ,EAAZ;IACA,IAAIa,QAAQ,GAAG,KAAf;;IACA,IAAInB,WAAJ,EAAiB;MACfmB,QAAQ,GAAGzB,QAAQ,CAACC,QAAQ,CAACoB,GAAD,CAAT,EAAgBG,GAAhB,CAAnBC;IACD;;IACD,IAAIlB,aAAJ,EAAmB;MACjBkB,QAAQ,GAAGvB,OAAO,CAACC,UAAU,CAACkB,GAAD,CAAX,EAAkBG,GAAlB,CAAlBC;IACD;;IACD,IAAIjB,iBAAJ,EAAuB;MACrBiB,QAAQ,GAAGjB,iBAAiB,CAACa,GAAD,CAA5BI;IACD;;IAED,OAAOA,QAAP;EAdkB,GAgBpB,CAAClB,aAAD,EAAgBD,WAAhB,EAA6BE,iBAA7B,CAhBoBZ,CAAtB;EAmBA,IAAM8B,gBAAgB,GAAG9B,KAAK,CAACsB,WAANtB,CAAkB,YAAM;IAC/CoB,aAAa,CAACW,SAAD,CAAbX;EADuB,GAEtB,CAACA,aAAD,CAFsBpB,CAAzB;EAIA,OAAO;IACLiB,QAAQ,EAARA,QADK;IAELC,WAAW,EAAXA,WAFK;IAGLG,YAAY,EAAZA,YAHK;IAILE,YAAY,EAAZA,YAJK;IAKLJ,UAAU,EAAVA,UALK;IAMLC,aAAa,EAAbA,aANK;IAOLI,YAAY,EAAZA,YAPK;IAQLG,aAAa,EAAbA,aARK;IASLG,gBAAgB,EAAhBA;EATK,CAAP;AAWD","names":["React","subMonths","addMonths","isSameDay","isBefore","endOfDay","isAfter","startOfDay","useCalendar","value","disablePast","disableFuture","shouldDisableDate","useState","Array","isArray","Date","viewDate","setViewDate","focusedDay","setFocusedDay","setPrevMonth","useCallback","setNextMonth","isDayFocused","day","Boolean","isDayDisabled","now","disabled","resetSelectedDay","undefined"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/hooks/useCalendar.ts"],"sourcesContent":["import * as React from \"react\";\nimport {\n  subMonths,\n  addMonths,\n  isSameDay,\n  isBefore,\n  endOfDay,\n  isAfter,\n  startOfDay,\n} from \"date-fns\";\n\nexport interface UseCalendarDependencies {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date()\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(\n    () => setViewDate(subMonths(viewDate, 1)),\n    [viewDate]\n  );\n  const setNextMonth = React.useCallback(\n    () => setViewDate(addMonths(viewDate, 1)),\n    [viewDate]\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay]\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate]\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}