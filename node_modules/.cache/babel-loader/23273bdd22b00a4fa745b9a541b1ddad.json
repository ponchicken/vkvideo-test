{"ast":null,"code":"import { canUseDOM } from \"@vkontakte/vkjs\";\n/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\n// eslint-disable-next-line import/no-default-export\n\nexport default function animate(_ref) {\n  var duration = _ref.duration,\n      timing = _ref.timing,\n      draw = _ref.draw;\n\n  if (!canUseDOM) {\n    return;\n  }\n\n  var start = performance.now();\n  requestAnimationFrame(function animate(time) {\n    var timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    var progress = timing(timeFraction);\n    draw(progress);\n\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,SAAT,QAA0B,iBAA1B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;;AACA,eAAe,SAASC,OAAT,OAIqB;EAAA,IAHlCC,QAGkC,QAHlCA,QAGkC;EAAA,IAFlCC,MAEkC,QAFlCA,MAEkC;EAAA,IADlCC,IACkC,QADlCA,IACkC;;EAClC,IAAI,CAACJ,SAAL,EAAgB;IACd;EACD;;EAED,IAAMK,KAAK,GAAGC,WAAW,CAACC,GAAZD,EAAd;EAEAE,qBAAqB,CAAC,SAASP,OAAT,CAAiBQ,IAAjB,EAAqC;IACzD,IAAIC,YAAY,GAAG,CAACD,IAAI,GAAGJ,KAAR,IAAiBH,QAApC;;IAEA,IAAIQ,YAAY,GAAG,CAAnB,EAAsB;MACpBA,YAAY,GAAG,CAAfA;IACD;;IAED,IAAMC,QAAQ,GAAGR,MAAM,CAACO,YAAD,CAAvB;IAEAN,IAAI,CAACO,QAAD,CAAJP;;IAEA,IAAIM,YAAY,GAAG,CAAnB,EAAsB;MACpBF,qBAAqB,CAACP,OAAD,CAArBO;IACD;EAbkB,EAArBA;AAeD","names":["canUseDOM","animate","duration","timing","draw","start","performance","now","requestAnimationFrame","time","timeFraction","progress"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/lib/animate.ts"],"sourcesContent":["import { canUseDOM } from \"@vkontakte/vkjs\";\n\n/**\n * Функция для js анимации\n * @param {number} duration\n * @param {function} timing тайминг функция анимации\n * @param {function} draw коллбэк, в который прокидывается прогресс [0, 1]\n * @returns {void}\n */\nexport type TimingInterface = (timeFraction: number) => number;\n\nexport type DrawInterface = (progress: number) => void;\n\nexport interface AnimateArgumentsInterface {\n  duration: number;\n  timing: TimingInterface;\n  draw: DrawInterface;\n}\n\n// eslint-disable-next-line import/no-default-export\nexport default function animate({\n  duration,\n  timing,\n  draw,\n}: AnimateArgumentsInterface): void {\n  if (!canUseDOM) {\n    return;\n  }\n\n  const start = performance.now();\n\n  requestAnimationFrame(function animate(time: number): void {\n    let timeFraction = (time - start) / duration;\n\n    if (timeFraction > 1) {\n      timeFraction = 1;\n    }\n\n    const progress = timing(timeFraction);\n\n    draw(progress);\n\n    if (timeFraction < 1) {\n      requestAnimationFrame(animate);\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}