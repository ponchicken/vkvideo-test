{"ast":null,"code":"import { createScopedElement } from \"./jsxRuntime\";\nimport * as React from \"react\";\nimport { platform } from \"./platform\";\nimport { computeBrowserInfo } from \"./browser\";\nimport { DOMContext, getDOM } from \"../lib/dom\";\nexport var SSRContext = /*#__PURE__*/React.createContext({\n  platform: null,\n  userAgent: \"\",\n  browserInfo: undefined\n});\nexport var SSRWrapper = function SSRWrapper(props) {\n  var userAgent = props.userAgent,\n      browserInfo = props.browserInfo,\n      children = props.children;\n\n  if (!browserInfo && userAgent) {\n    browserInfo = computeBrowserInfo(userAgent);\n  } // TODO: Каждый раз создаётся новый объект для контекста - плохо\n\n\n  var contextValue = {\n    platform: platform(browserInfo),\n    browserInfo: browserInfo,\n    userAgent: userAgent\n  }; // TODO: move to state, and update in effect?\n\n  var dom = getDOM();\n  return createScopedElement(SSRContext.Provider, {\n    value: contextValue\n  }, createScopedElement(DOMContext.Provider, {\n    value: dom\n  }, children));\n};","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAAuBC,QAAvB;AACA,SAAsBC,kBAAtB;AACA,SAASC,UAAT,EAAqBC,MAArB;AAQA,OAAO,IAAMC,UAAU,gBAAGL,KAAK,CAACM,aAANN,CAAyC;EACjEC,QAAQ,EAAE,IADuD;EAEjEM,SAAS,EAAE,EAFsD;EAGjEC,WAAW,EAAEC;AAHoD,CAAzCT,CAAnB;AAWP,OAAO,IAAMU,UAAqC,GAAG,SAAxCA,UAAwC,CAACC,KAAD,EAAW;EAC9D,IAAMJ,SAAN,GAA2CI,KAA3C,CAAMJ,SAAN;EAAA,IAAiBC,WAAjB,GAA2CG,KAA3C,CAAiBH,WAAjB;EAAA,IAA8BI,QAA9B,GAA2CD,KAA3C,CAA8BC,QAA9B;;EAEA,IAAI,CAACJ,WAAD,IAAgBD,SAApB,EAA+B;IAC7BC,WAAW,GAAGN,kBAAkB,CAACK,SAAD,CAAhCC;EAJ4D,EAO9D;;;EACA,IAAMK,YAAY,GAAG;IACnBZ,QAAQ,EAAEA,QAAQ,CAACO,WAAD,CADC;IAEnBA,WAAW,EAAXA,WAFmB;IAGnBD,SAAS,EAATA;EAHmB,CAArB,CAR8D,CAc9D;;EACA,IAAMO,GAAG,GAAGV,MAAM,EAAlB;EAEA,OACEW,oBAACV,UAAD,CAAYW,QAAZ;IAAqBC,KAAK,EAAEJ;EAA5B,GACEE,oBAACZ,UAAD,CAAYa,QAAZ;IAAqBC,KAAK,EAAEH;EAA5B,GAAkCF,QAAlC,CADF,CADF;AAjBK","names":["React","platform","computeBrowserInfo","DOMContext","getDOM","SSRContext","createContext","userAgent","browserInfo","undefined","SSRWrapper","props","children","contextValue","dom","createScopedElement","Provider","value"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/lib/SSR.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { PlatformType, platform } from \"./platform\";\nimport { BrowserInfo, computeBrowserInfo } from \"./browser\";\nimport { DOMContext, getDOM } from \"../lib/dom\";\n\nexport interface SSRContextInterface {\n  platform: PlatformType | null;\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRContext = React.createContext<SSRContextInterface>({\n  platform: null,\n  userAgent: \"\",\n  browserInfo: undefined,\n});\n\nexport interface SSRWrapperProps {\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRWrapper: React.FC<SSRWrapperProps> = (props) => {\n  let { userAgent, browserInfo, children } = props;\n\n  if (!browserInfo && userAgent) {\n    browserInfo = computeBrowserInfo(userAgent);\n  }\n\n  // TODO: Каждый раз создаётся новый объект для контекста - плохо\n  const contextValue = {\n    platform: platform(browserInfo),\n    browserInfo,\n    userAgent,\n  };\n\n  // TODO: move to state, and update in effect?\n  const dom = getDOM();\n\n  return (\n    <SSRContext.Provider value={contextValue}>\n      <DOMContext.Provider value={dom}>{children}</DOMContext.Provider>\n    </SSRContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}