{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"targetRef\", \"scrollBoxRef\", \"placement\", \"fetching\", \"onPlacementChange\", \"offsetDistance\", \"sameWidth\", \"forcePortal\"];\nimport { createScopedElement } from \"../../lib/jsxRuntime\";\nimport * as React from \"react\";\nimport CustomScrollView from \"../CustomScrollView/CustomScrollView\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Popper } from \"../Popper/Popper\";\nimport Spinner from \"../Spinner/Spinner\";\n\nvar calcIsTop = function calcIsTop(placement) {\n  return placement === null || placement === void 0 ? void 0 : placement.includes(\"top\");\n};\n\nexport var CustomSelectDropdown = function CustomSelectDropdown(_ref) {\n  var children = _ref.children,\n      targetRef = _ref.targetRef,\n      scrollBoxRef = _ref.scrollBoxRef,\n      placement = _ref.placement,\n      fetching = _ref.fetching,\n      parentOnPlacementChange = _ref.onPlacementChange,\n      _ref$offsetDistance = _ref.offsetDistance,\n      offsetDistance = _ref$offsetDistance === void 0 ? 0 : _ref$offsetDistance,\n      _ref$sameWidth = _ref.sameWidth,\n      sameWidth = _ref$sameWidth === void 0 ? true : _ref$sameWidth,\n      _ref$forcePortal = _ref.forcePortal,\n      forcePortal = _ref$forcePortal === void 0 ? true : _ref$forcePortal,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var _React$useState = React.useState(function () {\n    return calcIsTop(placement);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isTop = _React$useState2[0],\n      setIsTop = _React$useState2[1];\n\n  var onPlacementChange = React.useCallback(function (_ref2) {\n    var placement = _ref2.placement;\n    setIsTop(calcIsTop(placement));\n    parentOnPlacementChange === null || parentOnPlacementChange === void 0 ? void 0 : parentOnPlacementChange(placement);\n  }, [parentOnPlacementChange, setIsTop]);\n  return createScopedElement(Popper, _extends({\n    targetRef: targetRef,\n    offsetDistance: offsetDistance,\n    sameWidth: sameWidth,\n    onPlacementChange: onPlacementChange,\n    placement: placement,\n    vkuiClass: classNames(\"CustomSelectDropdown__options\", {\n      \"CustomSelectDropdown__options--popupDirectionTop\": isTop,\n      \"CustomSelectDropdown__options--not-adjacent\": offsetDistance > 0,\n      \"CustomSelectDropdown__options--same-width\": sameWidth\n    }),\n    forcePortal: forcePortal\n  }, restProps), createScopedElement(CustomScrollView, {\n    boxRef: scrollBoxRef,\n    vkuiClass: \"CustomSelectDropdown__CustomScrollView\"\n  }, fetching ? createScopedElement(\"div\", {\n    vkuiClass: \"CustomSelectDropdown__fetching\"\n  }, createScopedElement(Spinner, {\n    size: \"small\"\n  })) : children));\n};","map":{"version":3,"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,gBAAP;AACA,SAASC,UAAT;AACA,SAASC,MAAT;AACA,OAAOC,OAAP;;AAiBA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,SAAD;EAAA,OAA2BA,SAA3B,SAA2BA,aAA3B,WAA2BA,GAA3B,MAA2BA,YAAS,CAAEC,QAAXD,CAAoB,KAApBA,CAA3B;AAAlB;;AAEA,OAAO,IAAME,oBAAyD,GAAG,SAA5DA,oBAA4D,OAWnE;EAAA,IAVJC,QAUI,QAVJA,QAUI;EAAA,IATJC,SASI,QATJA,SASI;EAAA,IARJC,YAQI,QARJA,YAQI;EAAA,IAPJL,SAOI,QAPJA,SAOI;EAAA,IANJM,QAMI,QANJA,QAMI;EAAA,IALeC,uBAKf,QALJC,iBAKI;EAAA,+BAJJC,cAII;EAAA,IAJJA,cAII,oCAJa,CAIb;EAAA,0BAHJC,SAGI;EAAA,IAHJA,SAGI,+BAHQ,IAGR;EAAA,4BAFJC,WAEI;EAAA,IAFJA,WAEI,iCAFU,IAEV;EAAA,IADDC,SACC;;EACJ,sBAA0BlB,KAAK,CAACmB,QAANnB,CAAe;IAAA,OAAMK,SAAS,CAACC,SAAD,CAAf;EAAf,EAA1B;EAAA;EAAA,IAAOc,KAAP;EAAA,IAAcC,QAAd;;EAEA,IAAMP,iBAAiB,GAAGd,KAAK,CAACsB,WAANtB,CACxB,iBAA8C;IAAA,IAA3CM,SAA2C,SAA3CA,SAA2C;IAC5Ce,QAAQ,CAAChB,SAAS,CAACC,SAAD,CAAV,CAARe;IACAR,uBAAuB,SAAvBA,2BAAuB,WAAvBA,mCAAuB,CAAGP,SAAH,CAAvBO;EAHsB,GAKxB,CAACA,uBAAD,EAA0BQ,QAA1B,CALwBrB,CAA1B;EAQA,OACEuB,oBAACpB,MAAD;IACEO,SAAS,EAAEA,SADb;IAEEK,cAAc,EAAEA,cAFlB;IAGEC,SAAS,EAAEA,SAHb;IAIEF,iBAAiB,EAAEA,iBAJrB;IAKER,SAAS,EAAEA,SALb;IAMEkB,SAAS,EAAEtB,UAAU,CAAC,+BAAD,EAAkC;MACrD,oDAAoDkB,KADC;MAErD,+CAA+CL,cAAc,GAAG,CAFX;MAGrD,6CAA6CC;IAHQ,CAAlC,CANvB;IAWEC,WAAW,EAAEA;EAXf,GAYMC,SAZN,GAcEK,oBAACtB,gBAAD;IACEwB,MAAM,EAAEd,YADV;IAEEa,SAAS,EAAC;EAFZ,GAIGZ,QAAQ,GACPW;IAAKC,SAAS,EAAC;EAAf,GACED,oBAACnB,OAAD;IAASsB,IAAI,EAAC;EAAd,EADF,CADO,GAKPjB,QATJ,CAdF,CADF;AAtBK","names":["React","CustomScrollView","classNames","Popper","Spinner","calcIsTop","placement","includes","CustomSelectDropdown","children","targetRef","scrollBoxRef","fetching","parentOnPlacementChange","onPlacementChange","offsetDistance","sameWidth","forcePortal","restProps","useState","isTop","setIsTop","useCallback","createScopedElement","vkuiClass","boxRef","size"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/components/CustomSelectDropdown/CustomSelectDropdown.tsx"],"sourcesContent":["import * as React from \"react\";\nimport CustomScrollView from \"../CustomScrollView/CustomScrollView\";\nimport { classNames } from \"../../lib/classNames\";\nimport { Popper, Placement } from \"../Popper/Popper\";\nimport Spinner from \"../Spinner/Spinner\";\nimport { HasRef } from \"../../types\";\nimport \"./CustomSelectDropdown.css\";\n\nexport interface CustomSelectDropdownProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasRef<HTMLDivElement> {\n  targetRef: React.RefObject<HTMLElement>;\n  placement?: Placement;\n  scrollBoxRef?: React.Ref<HTMLDivElement>;\n  fetching?: boolean;\n  offsetDistance?: number;\n  sameWidth?: boolean;\n  forcePortal?: boolean;\n  onPlacementChange?: (placement?: Placement) => void;\n}\n\nconst calcIsTop = (placement?: Placement) => placement?.includes(\"top\");\n\nexport const CustomSelectDropdown: React.FC<CustomSelectDropdownProps> = ({\n  children,\n  targetRef,\n  scrollBoxRef,\n  placement,\n  fetching,\n  onPlacementChange: parentOnPlacementChange,\n  offsetDistance = 0,\n  sameWidth = true,\n  forcePortal = true,\n  ...restProps\n}) => {\n  const [isTop, setIsTop] = React.useState(() => calcIsTop(placement));\n\n  const onPlacementChange = React.useCallback(\n    ({ placement }: { placement?: Placement }) => {\n      setIsTop(calcIsTop(placement));\n      parentOnPlacementChange?.(placement);\n    },\n    [parentOnPlacementChange, setIsTop]\n  );\n\n  return (\n    <Popper\n      targetRef={targetRef}\n      offsetDistance={offsetDistance}\n      sameWidth={sameWidth}\n      onPlacementChange={onPlacementChange}\n      placement={placement}\n      vkuiClass={classNames(\"CustomSelectDropdown__options\", {\n        \"CustomSelectDropdown__options--popupDirectionTop\": isTop,\n        \"CustomSelectDropdown__options--not-adjacent\": offsetDistance > 0,\n        \"CustomSelectDropdown__options--same-width\": sameWidth,\n      })}\n      forcePortal={forcePortal}\n      {...restProps}\n    >\n      <CustomScrollView\n        boxRef={scrollBoxRef}\n        vkuiClass=\"CustomSelectDropdown__CustomScrollView\"\n      >\n        {fetching ? (\n          <div vkuiClass=\"CustomSelectDropdown__fetching\">\n            <Spinner size=\"small\" />\n          </div>\n        ) : (\n          children\n        )}\n      </CustomScrollView>\n    </Popper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}