{"ast":null,"code":"import * as React from \"react\";\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect\";\nimport { canUseDOM } from \"../lib/dom\";\nexport function useTimeout(cb, duration) {\n  var options = React.useRef({\n    cb: cb,\n    duration: duration\n  });\n  useIsomorphicLayoutEffect(function () {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n  var timeout = React.useRef();\n  var clear = React.useCallback(function () {\n    if (canUseDOM && timeout !== null && timeout !== void 0 && timeout.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  var set = React.useCallback(function () {\n    var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : options.current.duration;\n    clear();\n\n    if (canUseDOM) {\n      timeout.current = setTimeout(function () {\n        var cb = options.current.cb;\n        typeof cb === \"function\" && cb();\n      }, duration);\n    }\n  }, [clear]);\n  useIsomorphicLayoutEffect(function () {\n    return clear;\n  }, []);\n  return {\n    set: set,\n    clear: clear\n  };\n}","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,yBAAT;AACA,SAASC,SAAT;AAEA,OAAO,SAASC,UAAT,CAAoBC,EAApB,EAAmCC,QAAnC,EAAqD;EAC1D,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAANP,CAAa;IAAEI,EAAE,EAAFA,EAAF;IAAMC,QAAQ,EAARA;EAAN,CAAbL,CAAhB;EACAC,yBAAyB,CAAC,YAAM;IAC9BK,OAAO,CAACE,OAARF,CAAgBF,EAAhBE,GAAqBF,EAArBE;IACAA,OAAO,CAACE,OAARF,CAAgBD,QAAhBC,GAA2BD,QAA3BC;EAFuB,GAGtB,CAACF,EAAD,EAAKC,QAAL,CAHsB,CAAzBJ;EAKA,IAAMQ,OAAO,GAAGT,KAAK,CAACO,MAANP,EAAhB;EACA,IAAMU,KAAK,GAAGV,KAAK,CAACW,WAANX,CAAkB,YAAM;IACpC,IAAIE,SAAS,IAAIO,OAAJ,SAATP,IAAaO,OAAJ,WAATP,IAAaO,OAAO,CAAED,OAA1B,EAAmC;MACjCI,YAAY,CAACH,OAAO,CAACD,OAAT,CAAZI;IACD;EAHW,GAIX,EAJWZ,CAAd;EAKA,IAAMa,GAAG,GAAGb,KAAK,CAACW,WAANX,CACV,YAAyC;IAAA,IAAxCK,QAAwC,uEAA7BC,OAAO,CAACE,OAARF,CAAgBD,QAAa;IACvCK,KAAK;;IACL,IAAIR,SAAJ,EAAe;MACbO,OAAO,CAACD,OAARC,GAAkBK,UAAU,CAAC,YAAM;QACjC,IAAQV,EAAR,GAAeE,OAAO,CAACE,OAARF,CAAPF,EAAR;QACA,OAAOA,EAAP,KAAc,UAAd,IAA4BA,EAAE,EAA9B;MAF0B,GAGzBC,QAHyB,CAA5BI;IAID;EARO,GAUV,CAACC,KAAD,CAVUV,CAAZ;EAYAC,yBAAyB,CAAC;IAAA,OAAMS,KAAN;EAAD,GAAc,EAAd,CAAzBT;EAEA,OAAO;IAAEY,GAAG,EAAHA,GAAF;IAAOH,KAAK,EAALA;EAAP,CAAP;AACD","names":["React","useIsomorphicLayoutEffect","canUseDOM","useTimeout","cb","duration","options","useRef","current","timeout","clear","useCallback","clearTimeout","set","setTimeout"],"sources":["/Users/al.balandin/code/vkvideo-test/node_modules/@vkontakte/vkui/src/hooks/useTimeout.ts"],"sourcesContent":["import * as React from \"react\";\nimport { useIsomorphicLayoutEffect } from \"../lib/useIsomorphicLayoutEffect\";\nimport { canUseDOM } from \"../lib/dom\";\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = React.useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n  const clear = React.useCallback(() => {\n    if (canUseDOM && timeout?.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  const set = React.useCallback(\n    (duration = options.current.duration) => {\n      clear();\n      if (canUseDOM) {\n        timeout.current = setTimeout(() => {\n          const { cb } = options.current;\n          typeof cb === \"function\" && cb();\n        }, duration);\n      }\n    },\n    [clear]\n  );\n  useIsomorphicLayoutEffect(() => clear, []);\n\n  return { set, clear };\n}\n"]},"metadata":{},"sourceType":"module"}